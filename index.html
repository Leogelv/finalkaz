<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIGAMING.BOT - Интерактивная Презентация</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.26.0/cytoscape.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dagre/0.8.5/dagre.min.js"></script>
    <script src="https://cytoscape.org/cytoscape.js-dagre/cytoscape-dagre.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #e0e0e0;
            overflow-x: hidden;
        }

        /* Sidebar Navigation */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: linear-gradient(180deg, #1a1a2e 0%, #0f0f23 100%);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2rem 1.5rem;
            overflow-y: auto;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar h1 {
            font-size: 1.8rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 2rem;
            text-align: center;
        }

        .nav-section {
            margin-bottom: 2rem;
        }

        .nav-section h3 {
            font-size: 0.9rem;
            text-transform: uppercase;
            color: #888;
            margin-bottom: 1rem;
            letter-spacing: 0.05em;
        }

        .nav-item {
            display: block;
            padding: 0.8rem 1rem;
            margin-bottom: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .nav-item:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: rgba(102, 126, 234, 0.3);
            transform: translateX(5px);
        }

        .nav-item.active {
            background: rgba(102, 126, 234, 0.2);
            border-color: #667eea;
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            min-height: 100vh;
            padding: 2rem;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Section Headers */
        .section-header {
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-header h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-header p {
            font-size: 1.1rem;
            color: #aaa;
            line-height: 1.6;
        }

        /* Cards */
        .card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: rgba(102, 126, 234, 0.3);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
        }

        .card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        /* Graphs */
        .graph-container {
            width: 100%;
            height: 600px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .graph-controls {
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 10;
            display: flex;
            gap: 0.5rem;
        }

        .graph-controls button {
            padding: 0.5rem 1rem;
            background: rgba(102, 126, 234, 0.2);
            border: 1px solid rgba(102, 126, 234, 0.5);
            border-radius: 6px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .graph-controls button:hover {
            background: rgba(102, 126, 234, 0.4);
        }

        /* Grid Layouts */
        .grid {
            display: grid;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }
        
        .grid-4 {
            grid-template-columns: repeat(4, 1fr);
        }
        
        .metric-group {
            background: rgba(255, 255, 255, 0.03);
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .metric-group h4 {
            margin-bottom: 1rem;
            color: #667eea;
            font-size: 1.1rem;
        }
        
        .metric-group ul {
            list-style: none;
            padding: 0;
        }
        
        .metric-group li {
            padding: 0.3rem 0;
            color: #e0e0e0;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .metric-group li:last-child {
            border-bottom: none;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            margin-bottom: 2rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            overflow: hidden;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        th {
            background: rgba(102, 126, 234, 0.1);
            font-weight: 600;
            color: #fff;
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Feature Cards */
        .feature-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .feature-card h4 {
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 2rem;
        }

        /* Mobile Toggle */
        .mobile-toggle {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1001;
            padding: 0.5rem;
            background: rgba(102, 126, 234, 0.2);
            border: 1px solid rgba(102, 126, 234, 0.5);
            border-radius: 6px;
            cursor: pointer;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .mobile-toggle {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .highlight {
            background: rgba(102, 126, 234, 0.2);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 2rem 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            transform: translateX(-50%);
        }

        .timeline-item {
            position: relative;
            padding: 1rem 0;
            width: 50%;
        }

        .timeline-item:nth-child(odd) {
            text-align: right;
            padding-right: 3rem;
        }

        .timeline-item:nth-child(even) {
            left: 50%;
            padding-left: 3rem;
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: #667eea;
            border-radius: 50%;
            top: 1.5rem;
        }

        .timeline-item:nth-child(odd)::after {
            right: -10px;
        }

        .timeline-item:nth-child(even)::after {
            left: -10px;
        }

        @media (max-width: 768px) {
            .timeline::before {
                left: 2rem;
            }

            .timeline-item {
                width: 100%;
                padding-left: 4rem !important;
                text-align: left !important;
            }

            .timeline-item:nth-child(even) {
                left: 0;
            }

            .timeline-item::after {
                left: 1.5rem !important;
            }
        }
    </style>
</head>
<body>
    <!-- Mobile Toggle -->
    <div class="mobile-toggle" onclick="toggleSidebar()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12h18M3 6h18M3 18h18"></path>
        </svg>
    </div>

    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <h1>AIGAMING.BOT</h1>
        
        <div class="nav-section">
            <h3>Бизнес-концепция</h3>
            <div class="nav-item active" onclick="showSection('overview')">Обзор проекта</div>
            <div class="nav-item" onclick="showSection('business-model')">Бизнес-модель</div>
            <div class="nav-item" onclick="showSection('roadmap')">Продуктовая дорожная карта</div>
        </div>

        <div class="nav-section">
            <h3>Продукт</h3>
            <div class="nav-item" onclick="showSection('user-personas')">Портреты пользователей</div>
            <div class="nav-item" onclick="showSection('modules')">Ключевые модули</div>
            <div class="nav-item" onclick="showSection('use-cases')">Сценарии использования</div>
        </div>

        <div class="nav-section">
            <h3>Архитектура</h3>
            <div class="nav-item" onclick="showSection('system-architecture')">Системная архитектура</div>
            <div class="nav-item" onclick="showSection('database')">Схема базы данных</div>
            <div class="nav-item" onclick="showSection('data-flow')">Потоки данных</div>
            <div class="nav-item" onclick="showSection('ai-agents')">AI-агенты</div>
            <div class="nav-item" onclick="showSection('integrations')">Интеграции</div>
        </div>

        <div class="nav-section">
            <h3>Управление</h3>
         <div class="nav-item" onclick="showSection('team')">Команда проекта</div> 
            <div class="nav-item" onclick="showSection('budget')">Бюджет</div> 
            <div class="nav-item" onclick="showSection('risks')">Матрица рисков</div>
            <div class="nav-item" onclick="showSection('plan')">План разработки</div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Overview Section -->
        <section class="section active" id="overview">
            <div class="section-header">
                <h2>Обзор проекта AIGAMING.BOT</h2>
                <p>AI-ассистент для автоматизации и оптимизации процессов удержания игроков в онлайн-казино</p>
            </div>

            <!-- Discovery Phase Card -->
            <div class="card" style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%); border: 2px solid rgba(102, 126, 234, 0.3);">
                <h3>🔍 Discovery-фаза: от гипотез к системе, способной масштабироваться</h3>
                
                <p style="margin-bottom: 1.5rem;">На этапе Discovery мы провели глубокое исследование рынка iGaming и текущих решений в области удержания игроков. Особое внимание было уделено функциональным особенностям работы retention-специалиста в казино — как в ручных, так и автоматизированных форматах.</p>
                
                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem;">
                    <h4 style="color: #667eea; margin-bottom: 1rem;">💎 Ключевой инсайт Discovery:</h4>
                    <p>Основная ценность сервиса aiGaming — не просто автоматизация сценариев удержания, а:</p>
                    <ul style="list-style: none; padding-left: 1rem; margin-top: 0.5rem;">
                        <li>✓ Постоянная AI-аналитика исторических данных</li>
                        <li>✓ Автоматическая доработка сценариев и креативов для повышения конверсии</li>
                        <li>✓ Фокус на конечную метрику клиента — прибыль от удержанных игроков</li>
                    </ul>
                </div>

                <div class="grid grid-2" style="gap: 1rem; margin-bottom: 1.5rem;">
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <h4 style="color: #764ba2; margin-bottom: 0.5rem;">📋 Что мы реализовали:</h4>
                        <ul style="font-size: 0.95rem; line-height: 1.6;">
                            <li>Проработку всех пользовательских сценариев и CJM</li>
                            <li>Кликабельный прототип интерфейса</li>
                            <li>Формализацию архитектуры платформы</li>
                            <li>Техническое задание для команд</li>
                        </ul>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <h4 style="color: #f093fb; margin-bottom: 0.5rem;">🎯 Результат Discovery:</h4>
                        <p style="font-size: 0.95rem;">Это делает платформу эффективной, понятной и легко внедряемой даже для небольших команд казино без собственной продуктовой экспертизы.</p>
                        <p style="font-size: 0.95rem; margin-top: 0.5rem;"><strong>Мы полностью готовы к разработке и укладываемся в согласованные сроки.</strong></p>
                    </div>
                </div>
            </div>

            <div class="grid grid-2">
                <div class="card pulse">
                    <h3>🎯 Миссия</h3>
                    <p>Предоставить онлайн-казино и гемблинг-платформам AI-ассистента, который автоматизирует процессы удержания игроков, превращая данные в рост выручки и LTV.</p>
                </div>

                <div class="card">
                    <h3>🚀 Позиционирование</h3>
                    <p>Автономный AI-агент по удержанию, который берет на себя рутинные задачи retention-специалистов и риск-менеджеров, от глубокой сегментации до запуска персонализированных multi-канальных кампаний.</p>
                </div>
            </div>

            <div class="card">
                <h3>💡 Ключевые преимущества</h3>
                <div class="grid grid-3">
                    <div class="feature-card">
                        <h4>🤖 AI-автоматизация</h4>
                        <p>Интеллектуальная сегментация и генерация сценариев</p>
                    </div>
                    <div class="feature-card">
                        <h4>📊 Предиктивная аналитика</h4>
                        <p>Прогнозирование churn и LTV игроков</p>
                    </div>
                    <div class="feature-card">
                        <h4>🔄 Омниканальность</h4>
                        <p>Email, SMS, AI-звонки, Push в одной системе</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Business Model Section -->
        <section class="section" id="business-model">
            <div class="section-header">
                <h2>Бизнес-модель</h2>
                <p>Гибридная модель монетизации для низкого порога входа и масштабирования</p>
            </div>

            <div class="card">
                <h3>💰 Модель монетизации</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Компонент</th>
                                <th>Описание</th>
                                <th>Модель оплаты</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="highlight">Setup Fee</span></td>
                                <td>Интеграция и настройка универсального коннектора</td>
                                <td>Единоразовый платеж</td>
                            </tr>
                            <tr>
                                <td><span class="highlight">SaaS Fee</span></td>
                                <td>Доступ к платформе с базовым функционалом</td>
                                <td>Ежемесячная подписка</td>
                            </tr>
                            <tr>
                                <td><span class="highlight">Pay-as-you-grow</span></td>
                                <td>% от выручки с CRM-кампаний</td>
                                <td>Revenue share</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h3>📈 Проекция роста</h3>
                <div class="chart-container">
                    <canvas id="revenueChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Roadmap Section -->
        <section class="section" id="roadmap">
            <div class="section-header">
                <h2>Продуктовая дорожная карта</h2>
                <p>Поэтапный план развития продукта</p>
            </div>

            <div class="timeline">
                <div class="timeline-item">
                    <div class="card">
                        <h4>MVP Development</h4>
                        <p><strong>~12 недель (20.07 - 10.10)</strong></p>
                        <ul style="list-style: none; padding: 0;">
                            <li>✓ Интеграция через Webhook</li>
                            <li>✓ AI-сегментация</li>
                            <li>✓ Конструктор сценариев</li>
                            <li>✓ Email, SMS, AI Calls</li>
                        </ul>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="card">
                        <h4>Post-MVP: AI Optimization</h4>
                        <p><strong>~8 недель (11.10 - 05.12)</strong></p>
                        <ul style="list-style: none; padding: 0;">
                            <li>✓ Дообучение AI-моделей</li>
                            <li>✓ Предиктивная аналитика</li>
                            <li>✓ AI Support Agent</li>
                            <li>✓ Расширение интеграций</li>
                        </ul>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="card">
                        <h4>Launch & Scale</h4>
                        <p><strong>Начиная с 06.12</strong></p>
                        <ul style="list-style: none; padding: 0;">
                            <li>✓ Публичный запуск</li>
                            <li>✓ Enterprise функции</li>
                            <li>✓ CRM интеграции</li>
                            <li>✓ Выход в GameDev</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- User Personas Section -->
        <section class="section" id="user-personas">
            <div class="section-header">
                <h2>Портреты пользователей</h2>
                <p>Ключевые пользователи системы и их потребности</p>
            </div>

            <div class="grid grid-2">
                <div class="card">
                    <h3>👨‍💼 Алексей, CRM Manager</h3>
                    <h4>Цели:</h4>
                    <ul>
                        <li>Повысить LTV и Retention Rate</li>
                        <li>Увеличить доход от CRM</li>
                        <li>Быстро тестировать гипотезы</li>
                    </ul>
                    <h4 style="margin-top: 1rem;">Боли:</h4>
                    <ul>
                        <li>"Часы на ручную выгрузку в Excel"</li>
                        <li>"CRM-системы негибкие"</li>
                        <li>"Сложно понять причину падения метрик"</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>👨‍💻 Виктор, Risk Manager</h3>
                    <h4>Цели:</h4>
                    <ul>
                        <li>Минимизировать потери от мошенничества</li>
                        <li>Выявлять рискованных игроков</li>
                        <li>Real-time контроль финансов</li>
                    </ul>
                    <h4 style="margin-top: 1rem;">Боли:</h4>
                    <ul>
                        <li>"Нужен real-time апдейт по NGR"</li>
                        <li>"Нет единого профиля игрока"</li>
                        <li>"Сложно фильтровать по паттернам"</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Modules Section -->
        <section class="section" id="modules">
            <div class="section-header">
                <h2>Ключевые модули продукта</h2>
                <p>Взаимосвязанные компоненты системы</p>
            </div>

            <div class="graph-container" id="modulesGraph">
                <div class="graph-controls">
                    <button onclick="resetModulesGraph()">Сбросить</button>
                    <button onclick="fitModulesGraph()">По размеру</button>
                </div>
            </div>

            <div class="card" style="margin-top: 2rem;">
                <h3>🤖 Детализация AI Core и субагентов</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Субагент</th>
                                <th>Основные задачи</th>
                                <th>Используемые инструменты</th>
                                <th>Выходные данные</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Segment Agent</strong><br><code>generate-segments.ts</code></td>
                                <td>
                                    • Анализ поведения игроков<br>
                                    • Создание динамических сегментов<br>
                                    • NL-запросы в правила фильтрации
                                </td>
                                <td>
                                    • Firestore Queries<br>
                                    • NLP Parser<br>
                                    • Pattern Recognition
                                </td>
                                <td>
                                    • JSON правила сегментации<br>
                                    • Список userId<br>
                                    • Обоснование сегмента
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Scenario Agent</strong><br><code>generate-scenario.ts</code></td>
                                <td>
                                    • Генерация retention-сценариев<br>
                                    • Оптимизация последовательности<br>
                                    • A/B тест конфигурация
                                </td>
                                <td>
                                    • Template Engine<br>
                                    • Flow Builder<br>
                                    • Historical Analysis
                                </td>
                                <td>
                                    • ReactFlow JSON<br>
                                    • Timing параметры<br>
                                    • Success metrics
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Content Agent</strong><br><code>generate-content.ts</code></td>
                                <td>
                                    • Персонализация сообщений<br>
                                    • Генерация креативов<br>
                                    • Адаптация под канал
                                </td>
                                <td>
                                    • Template Engine<br>
                                    • NLP Parser<br>
                                    • Tone Analyzer
                                </td>
                                <td>
                                    • Email/SMS тексты<br>
                                    • Call скрипты<br>
                                    • Push контент
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Insights Agent</strong><br><code>explain-metrics.ts</code></td>
                                <td>
                                    • Анализ падения метрик<br>
                                    • Выявление аномалий<br>
                                    • Actionable рекомендации
                                </td>
                                <td>
                                    • Analytics Engine<br>
                                    • Prediction Models<br>
                                    • Correlation Analysis
                                </td>
                                <td>
                                    • Инсайты и причины<br>
                                    • Рекомендации<br>
                                    • Прогнозы
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Risk Agent</strong><br><code>risk-assessment.ts</code></td>
                                <td>
                                    • Оценка риска игроков<br>
                                    • Выявление bonus abuse<br>
                                    • Fraud detection
                                </td>
                                <td>
                                    • Prediction Models<br>
                                    • Pattern Matching<br>
                                    • Behavioral Analysis
                                </td>
                                <td>
                                    • Risk scores<br>
                                    • Alert flags<br>
                                    • Action suggestions
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Optimization Agent</strong><br><code>optimize-campaigns.ts</code></td>
                                <td>
                                    • Оптимизация кампаний<br>
                                    • Управление A/B тестами<br>
                                    • ROI максимизация
                                </td>
                                <td>
                                    • A/B Test Framework<br>
                                    • Analytics Engine<br>
                                    • ML Optimizer
                                </td>
                                <td>
                                    • Оптимальные параметры<br>
                                    • Test winners<br>
                                    • ROI projections
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="grid grid-3">
                <div class="feature-card">
                    <h4>🎯 Command Center</h4>
                    <p>Главный дашборд с KPI и AI-рекомендациями</p>
                </div>
                <div class="feature-card">
                    <h4>👤 Player 360°</h4>
                    <p>Комплексный профиль каждого игрока</p>
                </div>
                <div class="feature-card">
                    <h4>🔍 Segment Builder</h4>
                    <p>AI-ассистированное создание сегментов</p>
                </div>
                <div class="feature-card">
                    <h4>🔄 Scenario Builder</h4>
                    <p>Визуальный конструктор retention-цепочек</p>
                </div>
                <div class="feature-card">
                    <h4>📊 Analytics</h4>
                    <p>Глубокая аналитика по кампаниям</p>
                </div>
                <div class="feature-card">
                    <h4>🤖 AI Core</h4>
                    <p>LangGraph-агенты для интеллектуальной автоматизации</p>
                </div>
            </div>
        </section>

        <!-- Use Cases Section -->
        <section class="section" id="use-cases">
            <div class="section-header">
                <h2>Ключевые сценарии использования</h2>
                <p>Примеры практического применения системы</p>
            </div>

            <div class="card">
                <h3>UC-01: Автоматическая реактивация VIP-игроков</h3>
                <div class="grid grid-2" style="margin-bottom: 2rem;">
                    <div>
                        <h4>📋 Описание сценария:</h4>
                        <p>Алексей (CRM Manager) хочет автоматически возвращать в игру VIP-игроков, которые не заходили более 14 дней. Система должна использовать AI для создания персонализированного подхода.</p>
                        
                        <h4 style="margin-top: 1rem;">🎯 Бизнес-цель:</h4>
                        <ul>
                            <li>Снизить churn rate VIP-сегмента на 25%</li>
                            <li>Увеличить LTV реактивированных игроков</li>
                            <li>Автоматизировать процесс без участия человека</li>
                        </ul>
                    </div>
                    <div>
                        <h4>🎰 Система персональных бонусов:</h4>
                        <ul>
                            <li><strong>AI-анализ:</strong> История игр, RTP, любимые слоты</li>
                            <li><strong>Расчет бонуса:</strong> Индивидуально для каждого игрока</li>
                            <li><strong>Типы бонусов:</strong> Депозитный, фриспины, кешбэк</li>
                            <li><strong>A/B тестирование:</strong> Оптимизация конверсии</li>
                            <li><strong>Активация:</strong> В реал-тайме во время звонка</li>
                        </ul>
                        
                        <h4 style="margin-top: 1rem;">📊 Ожидаемые метрики:</h4>
                        <p>Reactivation Rate: 35-40%<br>
                        Время на настройку: 5 минут<br>
                        ROI кампании: 250%+</p>
                    </div>
                </div>
                <div class="graph-container" style="height: 400px;">
                    <div class="graph-controls">
                        <button onclick="resetUseCase1()">Сбросить</button>
                        <button onclick="fitUseCase1()">По размеру</button>
                    </div>
                    <div id="useCase1Graph" style="height: calc(100% - 50px); width: 100%;"></div>
                </div>
            </div>

            <div class="card">
                <h3>UC-02: Анализ падения конверсии и A/B тест</h3>
                <div class="grid grid-2" style="margin-bottom: 2rem;">
                    <div>
                        <h4>📋 Описание сценария:</h4>
                        <p>Система автоматически обнаружила резкое падение Conversion Rate в кампании "Welcome Chain". AI анализирует причины и предлагает решение через A/B тестирование.</p>
                        
                        <h4 style="margin-top: 1rem;">🎯 Бизнес-цель:</h4>
                        <ul>
                            <li>Быстро выявлять проблемы в кампаниях</li>
                            <li>Автоматически предлагать решения</li>
                            <li>Минимизировать потери от неэффективных кампаний</li>
                        </ul>
                    </div>
                    <div>
                        <h4>🔍 AI-анализ включает:</h4>
                        <ul>
                            <li>Сравнение с историческими данными</li>
                            <li>Анализ изменений в кампании</li>
                            <li>Корреляция с внешними факторами</li>
                            <li>Генерация гипотез для тестирования</li>
                        </ul>
                        
                        <h4 style="margin-top: 1rem;">⚡ Скорость реакции:</h4>
                        <p>Обнаружение: Real-time<br>
                        AI-анализ: 30 секунд<br>
                        Запуск A/B: 2 минуты<br>
                        Первые результаты: 2 часа</p>
                    </div>
                </div>
                <div class="graph-container" style="height: 400px;">
                    <div class="graph-controls">
                        <button onclick="resetUseCase2()">Сбросить</button>
                        <button onclick="fitUseCase2()">По размеру</button>
                    </div>
                    <div id="useCase2Graph" style="height: calc(100% - 50px); width: 100%;"></div>
                </div>
            </div>

            <div class="grid grid-2">
                <div class="card">
                    <h3>UC-03: Предотвращение оттока high-rollers</h3>
                    <h4>🎰 Сценарий для Risk Manager:</h4>
                    <p>Виктор получает real-time алерт о резком изменении паттерна игры у крупного игрока.</p>
                    <ul>
                        <li><strong>Триггер:</strong> Снижение ставок на 50%+ за 3 дня</li>
                        <li><strong>AI-анализ:</strong> Определение причины (проигрыш, смена игр, технические проблемы)</li>
                        <li><strong>Действие:</strong> Персональный менеджер звонит в течение часа</li>
                        <li><strong>Результат:</strong> Сохранение 70% игроков от ухода</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>UC-04: Выявление бонус-хантеров</h3>
                    <h4>🚨 Автоматическая защита от абьюза:</h4>
                    <p>AI анализирует поведенческие паттерны новых игроков в real-time.</p>
                    <ul>
                        <li><strong>Индикаторы:</strong> Множественные аккаунты, игра только на бонусы, быстрый вывод</li>
                        <li><strong>AI Score:</strong> Вероятность bonus abuse от 0 до 100</li>
                        <li><strong>Автоматика:</strong> Блокировка бонусов при score > 80</li>
                        <li><strong>Точность:</strong> 95% true positive, 2% false positive</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- System Architecture Section -->
        <section class="section" id="system-architecture">
            <div class="section-header">
                <h2>Системная архитектура</h2>
                <p>Техническая структура проекта</p>
            </div>

            <div class="graph-container" id="architectureGraph">
                <div class="graph-controls">
                    <button onclick="resetArchitecture()">Сбросить</button>
                    <button onclick="fitArchitecture()">По размеру</button>
                </div>
            </div>

            <div class="grid grid-3">
                <div class="feature-card">
                    <h4>🎨 Frontend</h4>
                    <p><strong>React + TypeScript</strong><br>
                    Современный UI с real-time обновлениями через Convex</p>
                </div>
                <div class="feature-card">
                    <h4>🧠 AI Orchestration</h4>
                    <p><strong>LangGraph</strong><br>
                    Управление потоками AI-агентов и координация задач</p>
                </div>
                <div class="feature-card">
                    <h4>💾 Data Layer</h4>
                    <p><strong>Supabase + Convex</strong><br>
                    PostgreSQL для хранения + Real-time синхронизация</p>
                </div>
            </div>
            <div class="card" style="margin-top: 2rem;">
                <h3>🔑 Ключевые особенности архитектуры</h3>
                <div class="grid grid-2">
                    <div>
                        <h4>📡 Communication APIs Layer</h4>
                        <p>Унифицированный интерфейс для работы с внешними сервисами коммуникации (Twilio, SendGrid, Customer.io), обеспечивающий абстракцию и легкую замену провайдеров.</p>
                    </div>
                    <div>
                        <h4>🤖 Multi-Agent System</h4>
                        <p>Специализированные AI-агенты для сегментации, создания сценариев, генерации контента и аналитики, работающие под управлением LangGraph.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Database Section -->
        <section class="section" id="database">
            <div class="section-header">
                <h2>Схема базы данных</h2>
                <p>Структура PostgreSQL в Supabase с RLS и real-time</p>
            </div>

            <div class="graph-container" style="height: 800px;">
                <div class="graph-controls">
                    <button onclick="resetDatabase()">Сбросить</button>
                    <button onclick="fitDatabase()">По размеру</button>
                </div>
                <div id="databaseGraph" style="height: calc(100% - 50px); width: 100%;"></div>
            </div>
            
            <div class="card" style="margin-top: 2rem;">
                <h3>📊 Метрики сегментации игроков</h3>
                <div class="grid grid-4">
                    <div class="metric-group">
                        <h4>🎯 Базовые атрибуты</h4>
                        <ul>
                            <li>Coins Balance</li>
                            <li>Customer ID</li>
                            <li>Registration Date</li>
                            <li>Country/Currency</li>
                            <li>Language/Time Zone</li>
                            <li>Age/Birthday/Gender</li>
                            <li>Email/Phone</li>
                            <li>Comms Preference</li>
                        </ul>
                    </div>
                    <div class="metric-group">
                        <h4>💰 RFM и монетарные</h4>
                        <ul>
                            <li>Recency (days)</li>
                            <li>Frequency</li>
                            <li>Monetary Value</li>
                            <li>Average Order Value</li>
                            <li>Total Revenue</li>
                            <li>Revenue Last 30/90 Days</li>
                            <li>Orders Last 30/90 Days</li>
                            <li>Lifetime metrics</li>
                        </ul>
                    </div>
                    <div class="metric-group">
                        <h4>🎮 Поведенческие</h4>
                        <ul>
                            <li>Games Types Played</li>
                            <li>Website Sessions</li>
                            <li>Time on Site</li>
                            <li>Bounce Rate</li>
                            <li>Device/Browser Type</li>
                            <li>Purchase Channel</li>
                            <li>Category Preferences</li>
                            <li>Cart Abandonment</li>
                        </ul>
                    </div>
                    <div class="metric-group">
                        <h4>🤖 AI предикты</h4>
                        <ul>
                            <li>Churn Probability</li>
                            <li>Predicted LTV</li>
                            <li>Propensity to Buy</li>
                            <li>Upsell/Cross-sell Score</li>
                            <li>Retention Probability</li>
                            <li>Engagement Score</li>
                            <li>Loyalty Score</li>
                            <li>Conversion Score</li>
                        </ul>
                    </div>
                </div>
                
                <div class="grid grid-4" style="margin-top: 2rem;">
                    <div class="metric-group">
                        <h4>📧 Коммуникации</h4>
                        <ul>
                            <li>Email Open Rate</li>
                            <li>Email Click Rate</li>
                            <li>SMS Response Rate</li>
                            <li>Phone Call Answer Rate</li>
                            <li>Push Response Rate</li>
                            <li>Channel Preference</li>
                            <li>Campaign Response History</li>
                            <li>Total Campaign Responses</li>
                        </ul>
                    </div>
                    <div class="metric-group">
                        <h4>🔄 Жизненный цикл</h4>
                        <ul>
                            <li>Customer Lifecycle Stage</li>
                            <li>Tenure (days)</li>
                            <li>Activation Status</li>
                            <li>Onboarding Status</li>
                            <li>VIP Status</li>
                            <li>Loyalty Program Status</li>
                            <li>Subscription Status</li>
                            <li>Retention Stage</li>
                        </ul>
                    </div>
                    <div class="metric-group">
                        <h4>🔒 Продуктовые</h4>
                        <ul>
                            <li>Product Categories Purchased</li>
                            <li>Discount Usage</li>
                            <li>Promo Code Usage</li>
                            <li>Return History</li>
                            <li>Refund History</li>
                            <li>Product Ratings Given</li>
                            <li>Reviews Written</li>
                            <li>Loyalty Points</li>
                        </ul>
                    </div>
                    <div class="metric-group">
                        <h4>⏰ Временные паттерны</h4>
                        <ul>
                            <li>Day of Week Preference</li>
                            <li>Time of Day Preference</li>
                            <li>Seasonal Patterns</li>
                            <li>Holiday Behavior</li>
                            <li>Weekend vs Weekday</li>
                            <li>Peak Activity Hours</li>
                            <li>Session Duration Patterns</li>
                            <li>Purchase Time Patterns</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card" style="margin-top: 2rem; background: rgba(102, 126, 234, 0.1); border-color: #667eea;">
                    <h4>📝 Пример сегментации</h4>
                    <p>Все эти метрики хранятся в специальных таблицах PostgreSQL и автоматически вычисляются через ETL пайплайны и AI-агенты. Например:</p>
                    <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px;"><code>SELECT p.*, 
       pm.recency_days,
       pm.frequency_30d,
       pm.monetary_lifetime,
       pp.churn_probability,
       pp.predicted_ltv
FROM players p
JOIN player_metrics pm ON p.id = pm.player_id  
JOIN player_predictions pp ON p.id = pp.player_id
WHERE pm.recency_days < 7 
  AND pp.churn_probability > 0.7
  AND pm.monetary_lifetime > 1000;</code></pre>
                </div>
            </div>
        </section>
        
        <!-- Data Flow Section -->
        <section class="section" id="data-flow">
            <div class="section-header">
                <h2>Потоки данных и интеграции</h2>
                <p>Как данные из различных источников попадают в систему и обрабатываются</p>
            </div>
            <div class="graph-container" style="height: 700px;">
                <div class="graph-controls">
                    <button onclick="resetDataFlow()">Сбросить</button>
                    <button onclick="fitDataFlow()">По размеру</button>
                </div>
                <div id="dataFlowGraph" style="height: calc(100% - 50px); width: 100%;"></div>
            </div>
            
            <div class="card" style="margin-top: 2rem;">
                <h3>🔄 Источники данных и ETL процессы</h3>
                <div class="grid grid-3">
                    <div class="feature-card">
                        <h4>🎰 Casino Platform APIs</h4>
                        <ul style="list-style: none; padding: 0; margin-top: 1rem;">
                            <li>• Player Registration Events</li>
                            <li>• Game Sessions & Results</li>
                            <li>• Deposits & Withdrawals</li>
                            <li>• Bonus Activations</li>
                            <li>• Game Preferences</li>
                            <li>• VIP Status Changes</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>📊 Analytics & Tracking</h4>
                        <ul style="list-style: none; padding: 0; margin-top: 1rem;">
                            <li>• Google Analytics 4</li>
                            <li>• Mixpanel Events</li>
                            <li>• Hotjar Sessions</li>
                            <li>• Custom Event Tracking</li>
                            <li>• Attribution Data</li>
                            <li>• A/B Test Results</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h4>💳 Payment Providers</h4>
                        <ul style="list-style: none; padding: 0; margin-top: 1rem;">
                            <li>• Transaction History</li>
                            <li>• Payment Methods</li>
                            <li>• Fraud Signals</li>
                            <li>• Chargebacks</li>
                            <li>• Limits & Restrictions</li>
                            <li>• KYC Status</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI Agents Section -->
        <section class="section" id="ai-agents">
            <div class="section-header">
                <h2>Архитектура AI-агентов</h2>
                <p>Система взаимодействующих AI-агентов на базе LangGraph</p>
            </div>

            <div class="graph-container" id="aiAgentsGraph">
                <div class="graph-controls">
                    <button onclick="resetAIAgents()">Сбросить</button>
                    <button onclick="fitAIAgents()">По размеру</button>
                </div>
            </div>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Агент</th>
                            <th>Цель</th>
                            <th>LangGraph Flows</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Агент Анализа и Сегментации</td>
                            <td>Анализ данных, создание сегментов</td>
                            <td>generate-segments.ts</td>
                        </tr>
                        <tr>
                            <td>Агент Генерации Сценариев</td>
                            <td>Создание retention-сценариев</td>
                            <td>generate-churn-scenario.ts</td>
                        </tr>
                        <tr>
                            <td>Агент Генерации Контента</td>
                            <td>Персонализированный контент</td>
                            <td>generate-communication-content.ts</td>
                        </tr>
                        <tr>
                            <td>Агент Инсайтов и Прогнозов</td>
                            <td>Аналитика и рекомендации</td>
                            <td>explain-metric-drop.ts</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Integrations Section -->
        <section class="section" id="integrations">
            <div class="section-header">
                <h2>Стратегия интеграций</h2>
                <p>Входящие и исходящие интеграции системы</p>
            </div>

            <div class="card">
                <h3>📥 Универсальный коннектор казино</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Категория</th>
                                <th>Поле</th>
                                <th>Тип</th>
                                <th>Пример</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td rowspan="4">Игрок</td>
                                <td>userId</td>
                                <td>string</td>
                                <td>user-12345</td>
                            </tr>
                            <tr>
                                <td>registrationDate</td>
                                <td>timestamp</td>
                                <td>2024-07-15T10:00:00Z</td>
                            </tr>
                            <tr>
                                <td>country</td>
                                <td>string</td>
                                <td>DE</td>
                            </tr>
                            <tr>
                                <td>currency</td>
                                <td>string</td>
                                <td>EUR</td>
                            </tr>
                            <tr>
                                <td rowspan="3">Финансы</td>
                                <td>transactionType</td>
                                <td>string</td>
                                <td>deposit, withdrawal</td>
                            </tr>
                            <tr>
                                <td>amount</td>
                                <td>number</td>
                                <td>50.00</td>
                            </tr>
                            <tr>
                                <td>balance</td>
                                <td>number</td>
                                <td>150.75</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="grid grid-2">
                <div class="card">
                    <h3>📤 Коммуникационные каналы</h3>
                    <ul>
                        <li><strong>Twilio:</strong> SMS и AI-звонки</li>
                        <li><strong>SendGrid:</strong> Email-рассылки</li>
                        <li><strong>SendPulse:</strong> Push-уведомления</li>
                        <li><strong>Custom Webhook:</strong> Внешние системы</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>🔄 CRM интеграции</h3>
                    <ul>
                        <li><strong>HubSpot:</strong> Двусторонняя синхронизация</li>
                        <li><strong>Salesforce:</strong> Контакты и события</li>
                        <li><strong>API:</strong> RESTful интерфейс</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Team Section -->
        <section class="section" id="team">
            <div class="section-header">
                <h2>Команда проекта</h2>
                <p>Структура команды для разработки MVP</p>
            </div>

            <div class="card">
                <h3>👥 Lean MVP Team</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Роль</th>
                                <th>FTE</th>
                                <th>Ключевые задачи</th>
                                <th>Ставка ($/мес)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Tech Lead</td>
                                <td>1.0</td>
                                <td>Техническое руководство, архитектура, код-ревью, менторинг</td>
                                <td>$6,000</td>
                            </tr>
                            <tr>
                                <td>Product/Project Manager</td>
                                <td>1.0</td>
                                <td>Управление проектом, коммуникация с клиентом, приоритизация</td>
                                <td>$5,000</td>
                            </tr>
                            <tr>
                                <td>Full-Stack Developer (Senior)</td>
                                <td>1.0</td>
                                <td>Архитектура, backend, сложные интеграции, код-ревью</td>
                                <td>$6,500</td>
                            </tr>
                            <tr>
                                <td>Full-Stack Developer (Mid)</td>
                                <td>1.0</td>
                                <td>Frontend разработка, UI компоненты, простые API</td>
                                <td>$2,500</td>
                            </tr>
                            <tr>
                                <td>Data Scientist / AI Developer</td>
                                <td>1.0</td>
                                <td>AI-агенты, LangGraph flows, ML модели, промпт-инжиниринг</td>
                                <td>$5,000</td>
                            </tr>
                            <tr>
                                <td>QA Engineer</td>
                                <td>0.5</td>
                                <td>Тестирование, тест-кейсы, E2E проверка</td>
                                <td>$1,000</td>
                            </tr>
                            <tr style="background: rgba(102, 126, 234, 0.1);">
                                <td><strong>Итого ФОТ:</strong></td>
                                <td><strong>5.5</strong></td>
                                <td></td>
                                <td><strong>$26,000</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h3>📊 Распределение ролей</h3>
                <div class="chart-container">
                    <canvas id="teamChart"></canvas>
                </div>
            </div>
        </section>

    Budget Section
        <section class="section" id="budget">
            <div class="section-header">
                <h2>Бюджет проекта</h2>
                <p>Финансовое планирование на 5 месяцев разработки</p>
            </div>

            <div class="card">
                <h3>💰 Общий бюджет</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Статья расходов</th>
                                <th>$/месяц</th>
                                <th>За 5 месяцев</th>
                                <th>Примечания</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ФОТ (месяцы 1-3)</td>
                                <td>$26,000</td>
                                <td>$78,000</td>
                                <td>Полная команда на этапе активной разработки</td>
                            </tr>
                            <tr>
                                <td>ФОТ (месяцы 4-5)</td>
                                <td>$20,000</td>
                                <td>$40,000</td>
                                <td>Оптимизация после MVP (без Tech Lead)</td>
                            </tr>
                            <tr>
                                <td>UI/UX Designer (Freelance)</td>
                                <td>-</td>
                                <td>$3,500</td>
                                <td>Ситуативный подряд на специфические задачи</td>
                            </tr>
                            <tr>
                                <td>Инфраструктура и API</td>
                                <td>$1,500</td>
                                <td>$7,500</td>
                                <td>Supabase, Convex, Google AI, Twilio, Customer.io</td>
                            </tr>
                            <tr>
                                <td>Прочие расходы</td>
                                <td>$500</td>
                                <td>$2,500</td>
                                <td>Jira, Figma и т.д.</td>
                            </tr>
                            <tr style="background: rgba(102, 126, 234, 0.1);">
                                <td><strong>ИТОГО</strong></td>
                                <td><strong>варьируется</strong></td>
                                <td><strong>$131,500</strong></td>
                                <td><strong>Средний: ~2.16 млн руб/мес</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div style="background: rgba(102, 126, 234, 0.1); padding: 1.5rem; border-radius: 12px; margin-top: 1.5rem;">
                    <h4 style="color: #667eea; margin-bottom: 0.5rem;">📊 Динамика ФОТ по месяцам:</h4>
                    <ul style="list-style: none; padding-left: 0;">
                        <li><strong>Месяцы 1-3:</strong> $26,000/мес - Полная команда включая Tech Lead для закладки правильной архитектуры и процессов</li>
                        <li><strong>Месяцы 4-5:</strong> $20,000/мес - После запуска MVP, Tech Lead переходит в консультационный режим (-$6,000)</li>
                    </ul>
                    <p style="margin-top: 1rem; font-size: 0.95rem;">Это позволяет оптимально использовать бюджет: максимальная экспертиза на старте и экономия после стабилизации продукта.</p>
                </div>
            </div>

            <div class="card">
                <h3>📈 Распределение бюджета</h3>
                <div class="chart-container">
                    <canvas id="budgetChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Risks Section -->
        <section class="section" id="risks">
            <div class="section-header">
                <h2>Матрица рисков</h2>
                <p>Ключевые риски проекта и стратегии митигации</p>
            </div>

            <div class="card">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Категория</th>
                                <th>Риск</th>
                                <th>Вероятность</th>
                                <th>Влияние</th>
                                <th>Стратегия митигации</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td rowspan="2">Технический</td>
                                <td>Сложность интеграции с системами казино</td>
                                <td><span class="highlight" style="background: rgba(255, 100, 100, 0.3);">Высокая</span></td>
                                <td><span class="highlight" style="background: rgba(255, 100, 100, 0.3);">Высокое</span></td>
                                <td>Гибкий универсальный коннектор, документация</td>
                            </tr>
                            <tr>
                                <td>Высокая нагрузка при real-time обработке</td>
                                <td><span class="highlight" style="background: rgba(255, 200, 100, 0.3);">Средняя</span></td>
                                <td><span class="highlight" style="background: rgba(255, 100, 100, 0.3);">Высокое</span></td>
                                <td>Асинхронная обработка, кэширование</td>
                            </tr>
                            <tr>
                                <td>Продукт</td>
                                <td>Низкая точность AI на старте</td>
                                <td><span class="highlight" style="background: rgba(255, 200, 100, 0.3);">Средняя</span></td>
                                <td><span class="highlight" style="background: rgba(255, 100, 100, 0.3);">Высокое</span></td>
                                <td>Ручная корректировка, AI как Co-pilot</td>
                            </tr>
                            <tr>
                                <td>Данные</td>
                                <td>Нежелание передавать данные</td>
                                <td><span class="highlight" style="background: rgba(255, 200, 100, 0.3);">Средняя</span></td>
                                <td><span class="highlight" style="background: rgba(255, 200, 100, 0.3);">Среднее</span></td>
                                <td>Демо безопасности, NDA</td>
                            </tr>
                            <tr>
                                <td>Команда</td>
                                <td>Недостаток экспертизы в гемблинге</td>
                                <td><span class="highlight" style="background: rgba(100, 255, 100, 0.3);">Низкая</span></td>
                                <td><span class="highlight" style="background: rgba(255, 200, 100, 0.3);">Среднее</span></td>
                                <td>Консультации с экспертами</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Development Plan Section -->
        <section class="section" id="plan">
            <div class="section-header">
                <h2>План разработки MVP</h2>
                <p>Детальный план на первые 3 месяца</p>
            </div>

            <div class="card">
                <h3>🚀 Спринты разработки</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Спринт</th>
                                <th>Недели</th>
                                <th>Цель</th>
                                <th>Ключевые результаты</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Sprint 1</td>
                                <td>1-2</td>
                                <td>Настройка и ядро</td>
                                <td>CI/CD, схема БД, UI-кит</td>
                            </tr>
                            <tr>
                                <td>Sprint 2</td>
                                <td>3-4</td>
                                <td>Прием данных</td>
                                <td>Webhook API, Профиль игрока</td>
                            </tr>
                            <tr>
                                <td>Sprint 3</td>
                                <td>5-6</td>
                                <td>Сегментация</td>
                                <td>AI-сегменты, конструктор правил</td>
                            </tr>
                            <tr>
                                <td>Sprint 4</td>
                                <td>7-8</td>
                                <td>Конструктор сценариев</td>
                                <td>ReactFlow builder, AI Co-pilot</td>
                            </tr>
                            <tr>
                                <td>Sprint 5</td>
                                <td>9-10</td>
                                <td>Исполнение кампаний</td>
                                <td>SendGrid, Twilio интеграция</td>
                            </tr>
                            <tr>
                                <td>Sprint 6</td>
                                <td>11-12</td>
                                <td>MVP Release</td>
                                <td>Аналитика, стабилизация</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Sprint 1 Detail -->
            <div class="card">
                <h3>📅 Sprint 1: Настройка и ядро (Недели 1-2)</h3>
                <h4>Цель спринта: Заложить техническую основу проекта</h4>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Роль</th>
                                <th>Задачи</th>
                                <th>Deliverables</th>
                                <th>Критерии готовности</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                            <tr>
                                <td><strong>Tech Lead</strong></td>
                                <td>
                                    • Техническое руководство<br>
                                    • Архитектурные решения<br>
                                    • Код-ревью всех критических частей<br>
                                    • Менторинг команды<br>
                                    • Технические интервью
                                </td>
                                <td>
                                    • Tech decisions log<br>
                                    • Architecture updates<br>
                                    • Code review reports<br>
                                    • Team knowledge base
                                </td>
                                <td>
                                    ✓ Архитектура устойчива<br>
                                    ✓ Команда следует best practices<br>
                                    ✓ Технический долг минимален
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Product Manager</strong></td>
                                <td>
                                    • Управление бэклогом<br>
                                    • Планирование спринтов<br>
                                    • Коммуникация с клиентом<br>
                                    • Приоритизация задач<br>
                                    • Документация требований
                                </td>
                                <td>
                                    • Product backlog<br>
                                    • Sprint plans<br>
                                    • Requirements docs<br>
                                    • User stories
                                </td>
                                <td>
                                    ✓ Бэклог приоритизирован<br>
                                    ✓ Требования задокументированы<br>
                                    ✓ Команда синхронизирована
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Senior Full-Stack</strong></td>
                                <td>
                                    • Архитектура системы<br>
                                    • Настройка GitHub репозитория<br>
                                    • CI/CD pipeline (GitHub Actions)<br>
                                    • Схема БД в Supabase<br>
                                    • Настройка Convex
                                </td>
                                <td>
                                    • architecture.md<br>
                                    • .github/workflows<br>
                                    • Supabase schema<br>
                                    • Convex config
                                </td>
                                <td>
                                    ✓ Автоматический деплой работает<br>
                                    ✓ БД создана и доступна<br>
                                    ✓ Real-time синхронизация готова
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Mid Full-Stack</strong></td>
                                <td>
                                    • Инициализация Next.js<br>
                                    • Настройка Tailwind CSS<br>
                                    • Базовый Layout<br>
                                    • UI-кит компонентов<br>
                                    • Storybook setup
                                </td>
                                <td>
                                    • MainLayout.tsx<br>
                                    • SidebarNav.tsx<br>
                                    • KpiCard.tsx<br>
                                    • Button, Input и др.
                                </td>
                                <td>
                                    ✓ Приложение запускается<br>
                                    ✓ Storybook работает<br>
                                    ✓ 10+ базовых компонентов
                                </td>
                            </tr>
                            <tr>
                                <td><strong>AI Developer</strong></td>
                                <td>
                                    • Настройка LangGraph<br>
                                    • Интеграция с LLM<br>
                                    • Базовые агенты<br>
                                    • Промпт-шаблоны
                                </td>
                                <td>
                                    • langgraph/config<br>
                                    • agents/base.ts<br>
                                    • prompts/templates
                                </td>
                                <td>
                                    ✓ LangGraph граф работает<br>
                                    ✓ API ключи настроены<br>
                                    ✓ Costs tracking работает
                                </td>
                            </tr>
                            <tr>
                                <td><strong>QA Engineer</strong></td>
                                <td>
                                    • Test plan документ<br>
                                    • Выбор инструментов<br>
                                    • Настройка окружения<br>
                                    • Первые тест-кейсы
                                </td>
                                <td>
                                    • test-plan.md<br>
                                    • Jest/Cypress config<br>
                                    • 20+ test cases
                                </td>
                                <td>
                                    ✓ Тестовое окружение готово<br>
                                    ✓ Можно запускать тесты<br>
                                    ✓ План покрытия готов
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Sprint 2 Detail -->
            <div class="card">
                <h3>📅 Sprint 2: Прием данных и Профиль игрока (Недели 3-4)</h3>
                <h4>Цель спринта: Реализовать прием данных от казино и отображение игроков</h4>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Роль</th>
                                <th>Задачи</th>
                                <th>Deliverables</th>
                                <th>Критерии готовности</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Team Lead</strong></td>
                                <td>
                                    • Webhook API endpoint<br>
                                    • Data adapter логика<br>
                                    • Запись в Firestore<br>
                                    • API авторизация<br>
                                    • Rate limiting
                                </td>
                                <td>
                                    • /api/webhook<br>
                                    • adapters/casino.ts<br>
                                    • middleware/auth.ts<br>
                                    • API документация
                                </td>
                                <td>
                                    ✓ Webhook принимает данные<br>
                                    ✓ Данные сохраняются в БД<br>
                                    ✓ Postman коллекция готова
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Full-Stack Dev</strong></td>
                                <td>
                                    • Страница списка игроков<br>
                                    • Таблица с фильтрами<br>
                                    • Страница профиля<br>
                                    • KPI виджеты игрока<br>
                                    • Activity feed
                                </td>
                                <td>
                                    • PlayersPage.tsx<br>
                                    • PlayersTable.tsx<br>
                                    • PlayerProfile.tsx<br>
                                    • PlayerKpiGrid.tsx<br>
                                    • ActivityFeed.tsx
                                </td>
                                <td>
                                    ✓ Список игроков работает<br>
                                    ✓ Фильтрация функционирует<br>
                                    ✓ Профиль отображает данные
                                </td>
                            </tr>
                            <tr>
                                <td><strong>AI Specialist</strong></td>
                                <td>
                                    • Flow для анализа игрока<br>
                                    • Генерация инсайтов<br>
                                    • Risk scoring логика<br>
                                    • Интеграция с UI
                                </td>
                                <td>
                                    • analyze-player.ts<br>
                                    • player-insights.ts<br>
                                    • risk-score.ts
                                </td>
                                <td>
                                    ✓ AI анализирует профили<br>
                                    ✓ Инсайты отображаются<br>
                                    ✓ Risk score считается
                                </td>
                            </tr>
                            <tr>
                                <td><strong>QA Engineer</strong></td>
                                <td>
                                    • API тесты webhook<br>
                                    • UI тесты таблицы<br>
                                    • Тесты профиля<br>
                                    • Load testing API
                                </td>
                                <td>
                                    • webhook.test.ts<br>
                                    • players-ui.test.ts<br>
                                    • Load test report
                                </td>
                                <td>
                                    ✓ 95% покрытие API<br>
                                    ✓ E2E тесты проходят<br>
                                    ✓ API держит 1000 rps
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Sprint 3 Detail -->
            <div class="card">
                <h3>📅 Sprint 3: Сегментация игроков (Недели 5-6)</h3>
                <h4>Цель спринта: AI-powered сегментация и ручной конструктор</h4>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Роль</th>
                                <th>Задачи</th>
                                <th>Deliverables</th>
                                <th>Критерии готовности</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Team Lead</strong></td>
                                <td>
                                    • CRUD API для сегментов<br>
                                    • Динамические сегменты<br>
                                    • Cron jobs логика<br>
                                    • Оптимизация запросов
                                </td>
                                <td>
                                    • /api/segments<br>
                                    • segment-engine.ts<br>
                                    • cron/segments.ts
                                </td>
                                <td>
                                    ✓ API полностью готов<br>
                                    ✓ Сегменты обновляются<br>
                                    ✓ Производительность OK
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Full-Stack Dev</strong></td>
                                <td>
                                    • Страница сегментов<br>
                                    • Rule builder UI<br>
                                    • AI Co-pilot чат<br>
                                    • Интеграция с API
                                </td>
                                <td>
                                    • SegmentsPage.tsx<br>
                                    • RuleBuilder.tsx<br>
                                    • AiCopilotChat.tsx<br>
                                    • SegmentModal.tsx
                                </td>
                                <td>
                                    ✓ Можно создавать сегменты<br>
                                    ✓ Rule builder работает<br>
                                    ✓ AI чат интегрирован
                                </td>
                            </tr>
                            <tr>
                                <td><strong>AI Specialist</strong></td>
                                <td>
                                    • generate-segments flow<br>
                                    • NL to rules parser<br>
                                    • Segment suggestions<br>
                                    • Промпт оптимизация
                                </td>
                                <td>
                                    • generate-segments.ts<br>
                                    • nl-parser.ts<br>
                                    • suggest-segments.ts<br>
                                    • prompts/segments.md
                                </td>
                                <td>
                                    ✓ AI создает сегменты<br>
                                    ✓ NL запросы работают<br>
                                    ✓ Suggestions релевантны
                                </td>
                            </tr>
                            <tr>
                                <td><strong>QA Engineer</strong></td>
                                <td>
                                    • Тесты rule builder<br>
                                    • AI Co-pilot тесты<br>
                                    • Segment logic тесты<br>
                                    • Performance тесты
                                </td>
                                <td>
                                    • segments.test.ts<br>
                                    • ai-copilot.test.ts<br>
                                    • Performance report
                                </td>
                                <td>
                                    ✓ Все правила работают<br>
                                    ✓ AI дает корректные ответы<br>
                                    ✓ 10k игроков OK
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Sprint 4 Detail -->
            <div class="card">
                <h3>📅 Sprint 4: Конструктор сценариев (Недели 7-8)</h3>
                <h4>Цель спринта: Visual scenario builder с AI-ассистентом</h4>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Роль</th>
                                <th>Задачи</th>
                                <th>Deliverables</th>
                                <th>Критерии готовности</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Team Lead</strong></td>
                                <td>
                                    • Scenarios API<br>
                                    • ReactFlow backend<br>
                                    • Execution engine<br>
                                    • State management
                                </td>
                                <td>
                                    • /api/scenarios<br>
                                    • scenario-engine.ts<br>
                                    • execution-queue.ts
                                </td>
                                <td>
                                    ✓ Сценарии сохраняются<br>
                                    ✓ Execution готов к интеграции<br>
                                    ✓ State tracking работает
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Full-Stack Dev</strong></td>
                                <td>
                                    • ReactFlow setup<br>
                                    • Custom nodes UI<br>
                                    • Drag-n-drop panel<br>
                                    • Config panels
                                </td>
                                <td>
                                    • BuilderPage.tsx<br>
                                    • CustomNodes/*<br>
                                    • NodeLibrary.tsx<br>
                                    • ConfigPanel.tsx
                                </td>
                                <td>
                                    ✓ Можно строить сценарии<br>
                                    ✓ Все типы нод работают<br>
                                    ✓ UX интуитивен
                                </td>
                            </tr>
                            <tr>
                                <td><strong>AI Specialist</strong></td>
                                <td>
                                    • Scenario generation<br>
                                    • Step optimization<br>
                                    • Content generation<br>
                                    • Flow validation
                                </td>
                                <td>
                                    • generate-scenario.ts<br>
                                    • optimize-flow.ts<br>
                                    • validate-scenario.ts
                                </td>
                                <td>
                                    ✓ AI создает сценарии<br>
                                    ✓ Оптимизация работает<br>
                                    ✓ Валидация ловит ошибки
                                </td>
                            </tr>
                            <tr>
                                <td><strong>QA Engineer</strong></td>
                                <td>
                                    • ReactFlow тесты<br>
                                    • Scenario logic тесты<br>
                                    • AI generation тесты<br>
                                    • UX тестирование
                                </td>
                                <td>
                                    • builder.test.ts<br>
                                    • scenarios.test.ts<br>
                                    • UX test report
                                </td>
                                <td>
                                    ✓ Все flows работают<br>
                                    ✓ Нет багов в UI<br>
                                    ✓ UX score > 8/10
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Sprint 5 Detail -->
            <div class="card">
                <h3>📅 Sprint 5: Исполнение кампаний (Недели 9-10)</h3>
                <h4>Цель спринта: Интеграция каналов коммуникации</h4>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Роль</th>
                                <th>Задачи</th>
                                <th>Deliverables</th>
                                <th>Критерии готовности</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Team Lead</strong></td>
                                <td>
                                    • SendGrid интеграция<br>
                                    • Twilio SMS setup<br>
                                    • Queue management<br>
                                    • Error handling<br>
                                    • Retry логика
                                </td>
                                <td>
                                    • channels/email.ts<br>
                                    • channels/sms.ts<br>
                                    • queue/processor.ts<br>
                                    • monitoring setup
                                </td>
                                <td>
                                    ✓ Email отправляются<br>
                                    ✓ SMS доставляются<br>
                                    ✓ Retry работает<br>
                                    ✓ Logs записываются
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Full-Stack Dev</strong></td>
                                <td>
                                    • Channel config UI<br>
                                    • Template editor<br>
                                    • Preview функция<br>
                                    • Sending status UI
                                </td>
                                <td>
                                    • ChannelConfig.tsx<br>
                                    • TemplateEditor.tsx<br>
                                    • MessagePreview.tsx<br>
                                    • StatusDashboard.tsx
                                </td>
                                <td>
                                    ✓ Можно настроить каналы<br>
                                    ✓ Preview работает<br>
                                    ✓ Статусы real-time
                                </td>
                            </tr>
                            <tr>
                                <td><strong>AI Specialist</strong></td>
                                <td>
                                    • Twilio AI calls<br>
                                    • Content generation<br>
                                    • Personalization<br>
                                    • A/B testing logic
                                </td>
                                <td>
                                    • ai-caller.ts<br>
                                    • generate-content.ts<br>
                                    • personalize.ts<br>
                                    • ab-optimizer.ts
                                </td>
                                <td>
                                    ✓ AI звонки работают<br>
                                    ✓ Контент персонализирован<br>
                                    ✓ A/B тесты запускаются
                                </td>
                            </tr>
                            <tr>
                                <td><strong>QA Engineer</strong></td>
                                <td>
                                    • Channel тесты<br>
                                    • Delivery тесты<br>
                                    • Load testing<br>
                                    • Integration тесты
                                </td>
                                <td>
                                    • channels.test.ts<br>
                                    • delivery.test.ts<br>
                                    • Load test 10k msgs
                                </td>
                                <td>
                                    ✓ 99% delivery rate<br>
                                    ✓ Нет потерь сообщений<br>
                                    ✓ 10k/hour capacity
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Sprint 6 Detail -->
            <div class="card">
                <h3>📅 Sprint 6: Аналитика и MVP Release (Недели 11-12)</h3>
                <h4>Цель спринта: Завершение MVP и подготовка к запуску</h4>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Роль</th>
                                <th>Задачи</th>
                                <th>Deliverables</th>
                                <th>Критерии готовности</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Team Lead</strong></td>
                                <td>
                                    • Analytics engine<br>
                                    • Performance opt<br>
                                    • Security audit<br>
                                    • Deploy pipeline<br>
                                    • Documentation
                                </td>
                                <td>
                                    • analytics/*.ts<br>
                                    • Security report<br>
                                    • Deploy guide<br>
                                    • API docs v1.0
                                </td>
                                <td>
                                    ✓ Все метрики считаются<br>
                                    ✓ Performance < 200ms<br>
                                    ✓ Security OK<br>
                                    ✓ Prod ready
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Full-Stack Dev</strong></td>
                                <td>
                                    • Analytics dashboards<br>
                                    • Charts & reports<br>
                                    • UI polish<br>
                                    • Mobile responsive<br>
                                    • Bug fixes
                                </td>
                                <td>
                                    • AnalyticsPage.tsx<br>
                                    • ReportsPage.tsx<br>
                                    • Chart components<br>
                                    • Mobile fixes
                                </td>
                                <td>
                                    ✓ Все дашборды работают<br>
                                    ✓ Charts interactive<br>
                                    ✓ Mobile UI OK<br>
                                    ✓ 0 critical bugs
                                </td>
                            </tr>
                            <tr>
                                <td><strong>AI Specialist</strong></td>
                                <td>
                                    • AI insights dashboard<br>
                                    • Metric predictions<br>
                                    • Anomaly detection<br>
                                    • Final prompts<br>
                                    • Cost optimization
                                </td>
                                <td>
                                    • insights-engine.ts<br>
                                    • predict-metrics.ts<br>
                                    • detect-anomaly.ts<br>
                                    • Prompts v1.0
                                </td>
                                <td>
                                    ✓ Insights релевантны<br>
                                    ✓ Predictions точны<br>
                                    ✓ Anomalies ловятся<br>
                                    ✓ AI costs < $0.01/user
                                </td>
                            </tr>
                            <tr>
                                <td><strong>QA Engineer</strong></td>
                                <td>
                                    • Full regression<br>
                                    • E2E scenarios<br>
                                    • Performance tests<br>
                                    • UAT coordination<br>
                                    • Release testing
                                </td>
                                <td>
                                    • Test report v1.0<br>
                                    • E2E suite<br>
                                    • Perf baseline<br>
                                    • UAT sign-off
                                </td>
                                <td>
                                    ✓ 0 blockers<br>
                                    ✓ < 5 minor bugs<br>
                                    ✓ Performance SLA met<br>
                                    ✓ UAT passed
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h3>📈 График прогресса</h3>
                <div class="chart-container">
                    <canvas id="progressChart"></canvas>
                </div>
            </div>

            <!-- Overall Project Progress -->
            <div class="card">
                <h3>🎯 Общий прогресс проекта</h3>
                <div style="margin-bottom: 2rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <span style="min-width: 100px;">Общий прогресс:</span>
                        <div style="flex: 1; height: 30px; background: rgba(255, 255, 255, 0.1); border-radius: 15px; position: relative; overflow: hidden;">
                            <div id="overallProgress" style="height: 100%; background: linear-gradient(90deg, #667eea 0%, #764ba2 100%); border-radius: 15px; width: 0%; transition: width 2s ease;">
                                <span style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-weight: bold;">0%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div id="sprintProgressBars" style="margin-top: 2rem;">
                        <!-- Sprint progress bars will be inserted here -->
                    </div>
                </div>

                <h4>📊 Deliverables Timeline</h4>
                <div class="chart-container" style="height: 500px;">
                    <canvas id="deliverablesChart"></canvas>
                </div>
            </div>

            <!-- Team Contribution -->
            <div class="card">
                <h3>👥 Вклад команды в прогресс</h3>
                <div class="chart-container">
                    <canvas id="teamContributionChart"></canvas>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to clicked nav item
            event.target.classList.add('active');
            
            // Close sidebar on mobile
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('active');
            }
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        // Initialize all graphs when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            initializeGraphs();
        });

        // Charts initialization
        function initializeCharts() {
            // Revenue projection chart
            const revenueCtx = document.getElementById('revenueChart');
            if (revenueCtx) {
                new Chart(revenueCtx, {
                    type: 'line',
                    data: {
                        labels: ['М1', 'М2', 'М3', 'М4', 'М5', 'М6', 'М7', 'М8', 'М9', 'М10', 'М11', 'М12'],
                        datasets: [{
                            label: 'Setup Fees',
                            data: [50000, 80000, 120000, 150000, 180000, 220000, 250000, 280000, 320000, 350000, 380000, 420000],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'SaaS Revenue',
                            data: [10000, 25000, 45000, 70000, 100000, 135000, 175000, 220000, 270000, 325000, 385000, 450000],
                            borderColor: '#764ba2',
                            backgroundColor: 'rgba(118, 75, 162, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Revenue Share',
                            data: [0, 5000, 15000, 35000, 65000, 105000, 155000, 215000, 285000, 365000, 455000, 555000],
                            borderColor: '#f093fb',
                            backgroundColor: 'rgba(240, 147, 251, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#e0e0e0' }
                            }
                        },
                        scales: {
                            y: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: '#e0e0e0' }
                            },
                            x: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: '#e0e0e0' }
                            }
                        }
                    }
                });
            }

            // Team distribution chart
            const teamCtx = document.getElementById('teamChart');
            if (teamCtx) {
                new Chart(teamCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Tech Lead', 'Product Manager', 'Senior Full-Stack', 'Mid Full-Stack', 'AI Developer', 'QA Engineer'],
                        datasets: [{
                            data: [6000, 5000, 6500, 2500, 5000, 1500],
                            backgroundColor: [
                                'rgba(147, 51, 234, 0.8)',
                                'rgba(102, 126, 234, 0.8)',
                                'rgba(118, 75, 162, 0.8)',
                                'rgba(240, 147, 251, 0.8)',
                                'rgba(255, 200, 100, 0.8)',
                                'rgba(100, 255, 100, 0.8)'
                            ],
                            borderColor: '#0a0a0a',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: { color: '#e0e0e0' }
                            }
                        }
                    }
                });
            }

            // Budget distribution chart
            const budgetCtx = document.getElementById('budgetChart');
            if (budgetCtx) {
                new Chart(budgetCtx, {
                    type: 'bar',
                    data: {
                        labels: ['ФОТ', 'UI/UX', 'Infrastructure', 'Other'],
                        datasets: [{
                            label: 'Расходы ($)',
                            data: [132500, 3500, 7500, 2500],
                            backgroundColor: [
                                'rgba(102, 126, 234, 0.8)',
                                'rgba(118, 75, 162, 0.8)',
                                'rgba(240, 147, 251, 0.8)',
                                'rgba(100, 255, 100, 0.8)'
                            ],
                            borderColor: 'rgba(255, 255, 255, 0.2)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: '#e0e0e0' }
                            },
                            x: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: '#e0e0e0' }
                            }
                        }
                    }
                });
            }

            // Progress chart
            const progressCtx = document.getElementById('progressChart');
            if (progressCtx) {
                new Chart(progressCtx, {
                    type: 'line',
                    data: {
                        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8', 'Week 9', 'Week 10', 'Week 11', 'Week 12'],
                        datasets: [{
                            label: 'Planned Progress %',
                            data: [8, 16, 25, 33, 42, 50, 58, 67, 75, 83, 92, 100],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Features Completed',
                            data: [5, 15, 22, 30, 38, 48, 55, 65, 72, 80, 88, 95],
                            borderColor: '#764ba2',
                            backgroundColor: 'rgba(118, 75, 162, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#e0e0e0' }
                            }
                        },
                        scales: {
                            y: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: '#e0e0e0' }
                            },
                            x: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: '#e0e0e0' }
                            }
                        }
                    }
                });
            }

            // Deliverables Timeline Chart
            const deliverablesCtx = document.getElementById('deliverablesChart');
            if (deliverablesCtx) {
                const deliverables = [
                    // Sprint 1
                    { task: 'Architecture Design', assignee: 'Tech Lead', start: 0, duration: 2, sprint: 1 },
                    { task: 'CI/CD Pipeline', assignee: 'Senior Full-Stack', start: 0, duration: 1, sprint: 1 },
                    { task: 'DB Schema', assignee: 'Tech Lead', start: 0.5, duration: 1.5, sprint: 1 },
                    { task: 'UI Kit Components', assignee: 'Mid Full-Stack', start: 0, duration: 2, sprint: 1 },
                    { task: 'LangGraph Setup', assignee: 'AI Developer', start: 0, duration: 1, sprint: 1 },
                    { task: 'Test Plan', assignee: 'QA Engineer', start: 0, duration: 1, sprint: 1 },
                    { task: 'Requirements', assignee: 'Product Manager', start: 0, duration: 2, sprint: 1 },
                    
                    // Sprint 2
                    { task: 'Webhook API', assignee: 'Team Lead', start: 2, duration: 1.5, sprint: 2 },
                    { task: 'Players UI', assignee: 'Full-Stack', start: 2, duration: 2, sprint: 2 },
                    { task: 'Player Insights', assignee: 'AI Specialist', start: 2.5, duration: 1.5, sprint: 2 },
                    { task: 'API Tests', assignee: 'QA Engineer', start: 3, duration: 1, sprint: 2 },
                    
                    // Sprint 3
                    { task: 'Segments Engine', assignee: 'Team Lead', start: 4, duration: 2, sprint: 3 },
                    { task: 'Rule Builder UI', assignee: 'Full-Stack', start: 4, duration: 2, sprint: 3 },
                    { task: 'AI Segments', assignee: 'AI Specialist', start: 4, duration: 2, sprint: 3 },
                    { task: 'Segment Tests', assignee: 'QA Engineer', start: 5, duration: 1, sprint: 3 },
                    
                    // Sprint 4
                    { task: 'Scenario API', assignee: 'Team Lead', start: 6, duration: 2, sprint: 4 },
                    { task: 'ReactFlow Builder', assignee: 'Full-Stack', start: 6, duration: 2, sprint: 4 },
                    { task: 'Scenario Generation', assignee: 'AI Specialist', start: 6, duration: 2, sprint: 4 },
                    { task: 'Builder Tests', assignee: 'QA Engineer', start: 7, duration: 1, sprint: 4 },
                    
                    // Sprint 5
                    { task: 'Channel Integration', assignee: 'Team Lead', start: 8, duration: 2, sprint: 5 },
                    { task: 'Template Editor', assignee: 'Full-Stack', start: 8, duration: 2, sprint: 5 },
                    { task: 'AI Calls', assignee: 'AI Specialist', start: 8, duration: 2, sprint: 5 },
                    { task: 'Integration Tests', assignee: 'QA Engineer', start: 9, duration: 1, sprint: 5 },
                    
                    // Sprint 6
                    { task: 'Analytics Engine', assignee: 'Team Lead', start: 10, duration: 2, sprint: 6 },
                    { task: 'Dashboard UI', assignee: 'Full-Stack', start: 10, duration: 2, sprint: 6 },
                    { task: 'AI Insights', assignee: 'AI Specialist', start: 10, duration: 2, sprint: 6 },
                    { task: 'Full Regression', assignee: 'QA Engineer', start: 10, duration: 2, sprint: 6 }
                ];

                const colors = {
                    'Tech Lead': 'rgba(147, 51, 234, 0.8)',
                    'Senior Full-Stack': 'rgba(102, 126, 234, 0.8)',
                    'Mid Full-Stack': 'rgba(118, 75, 162, 0.8)',
                    'AI Developer': 'rgba(240, 147, 251, 0.8)',
                    'QA Engineer': 'rgba(255, 200, 100, 0.8)',
                    'Product Manager': 'rgba(100, 255, 100, 0.8)'
                };

                const datasets = Object.keys(colors).map(assignee => ({
                    label: assignee,
                    data: deliverables
                        .filter(d => d.assignee === assignee)
                        .map(d => ({
                            x: [d.start, d.start + d.duration],
                            y: d.task
                        })),
                    backgroundColor: colors[assignee],
                    borderColor: colors[assignee],
                    borderWidth: 2,
                    barPercentage: 0.5
                }));

                new Chart(deliverablesCtx, {
                    type: 'bar',
                    data: {
                        labels: deliverables.map(d => d.task),
                        datasets: [{
                            label: 'Deliverables Timeline',
                            data: deliverables.map(d => ({
                                x: [d.start, d.start + d.duration],
                                y: d.task,
                                assignee: d.assignee
                            })),
                            backgroundColor: deliverables.map(d => colors[d.assignee]),
                            borderColor: 'rgba(255, 255, 255, 0.2)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const item = deliverables[context.dataIndex];
                                        return `${item.assignee}: Week ${item.start + 1} - Week ${item.start + item.duration}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                type: 'linear',
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { 
                                    color: '#e0e0e0',
                                    callback: function(value) {
                                        return 'Week ' + (value + 1);
                                    }
                                },
                                min: 0,
                                max: 12
                            },
                            y: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: '#e0e0e0' }
                            }
                        }
                    }
                });
            }

            // Team Contribution Chart
            const teamContributionCtx = document.getElementById('teamContributionChart');
            if (teamContributionCtx) {
                new Chart(teamContributionCtx, {
                    type: 'line',
                    data: {
                        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8', 'Week 9', 'Week 10', 'Week 11', 'Week 12'],
                        datasets: [{
                            label: 'Tech Lead',
                            data: [20, 35, 45, 60, 70, 80, 85, 90, 94, 97, 99, 100],
                            borderColor: '#9333ea',
                            backgroundColor: 'rgba(147, 51, 234, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Senior Full-Stack',
                            data: [15, 30, 40, 55, 65, 75, 82, 88, 92, 95, 97, 100],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Mid Full-Stack',
                            data: [10, 25, 35, 48, 58, 68, 75, 82, 87, 92, 95, 98],
                            borderColor: '#764ba2',
                            backgroundColor: 'rgba(118, 75, 162, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'AI Developer',
                            data: [5, 15, 30, 45, 60, 70, 78, 85, 90, 94, 97, 100],
                            borderColor: '#f093fb',
                            backgroundColor: 'rgba(240, 147, 251, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'QA Engineer',
                            data: [8, 20, 32, 42, 52, 62, 70, 78, 85, 90, 95, 100],
                            borderColor: '#ffc864',
                            backgroundColor: 'rgba(255, 200, 100, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Product Manager',
                            data: [25, 40, 50, 60, 68, 75, 80, 85, 90, 93, 96, 100],
                            borderColor: '#64ff64',
                            backgroundColor: 'rgba(100, 255, 100, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#e0e0e0' }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                            }
                        },
                        scales: {
                            y: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { 
                                    color: '#e0e0e0',
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            },
                            x: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: '#e0e0e0' }
                            }
                        }
                    }
                });
            }

            // Initialize sprint progress bars
            initializeSprintProgress();
        }

        // Sprint progress initialization
        function initializeSprintProgress() {
            const sprintData = [
                { name: 'Sprint 1: Настройка и ядро', progress: 100, deliverables: 5 },
                { name: 'Sprint 2: Прием данных', progress: 100, deliverables: 5 },
                { name: 'Sprint 3: Сегментация', progress: 85, deliverables: 4 },
                { name: 'Sprint 4: Конструктор сценариев', progress: 60, deliverables: 4 },
                { name: 'Sprint 5: Исполнение кампаний', progress: 30, deliverables: 4 },
                { name: 'Sprint 6: MVP Release', progress: 10, deliverables: 4 }
            ];

            const container = document.getElementById('sprintProgressBars');
            if (container) {
                container.innerHTML = sprintData.map((sprint, index) => `
                    <div style="margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span style="font-size: 0.9rem;">${sprint.name}</span>
                            <span style="font-size: 0.9rem; color: #888;">${sprint.deliverables} deliverables</span>
                        </div>
                        <div style="height: 20px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; position: relative; overflow: hidden;">
                            <div class="sprint-progress" data-progress="${sprint.progress}" style="height: 100%; background: linear-gradient(90deg, ${getSprintColor(index)} 0%, ${getSprintColor(index, true)} 100%); border-radius: 10px; width: 0%; transition: width 2s ease ${index * 0.2}s;">
                                <span style="position: absolute; right: 5px; top: 50%; transform: translateY(-50%); font-size: 0.8rem; font-weight: bold;">${sprint.progress}%</span>
                            </div>
                        </div>
                    </div>
                `).join('');

                // Animate progress bars
                setTimeout(() => {
                    document.querySelectorAll('.sprint-progress').forEach(bar => {
                        bar.style.width = bar.dataset.progress + '%';
                    });

                    // Update overall progress
                    const overallProgress = Math.round(sprintData.reduce((sum, s) => sum + s.progress, 0) / sprintData.length);
                    const overallBar = document.getElementById('overallProgress');
                    if (overallBar) {
                        overallBar.style.width = overallProgress + '%';
                        overallBar.querySelector('span').textContent = overallProgress + '%';
                    }
                }, 100);
            }
        }

        function getSprintColor(index, lighter = false) {
            const colors = [
                ['#667eea', '#8da0f5'],
                ['#764ba2', '#9470c2'],
                ['#f093fb', '#f5b3fc'],
                ['#4facfe', '#7fc3fe'],
                ['#43e97b', '#6def9a'],
                ['#fa709a', '#fc8fb3']
            ];
            return colors[index % colors.length][lighter ? 1 : 0];
        }

        // Cytoscape graphs
        let graphs = {};

        function initializeGraphs() {
            // Modules Graph
            const modulesContainer = document.getElementById('modulesGraph');
            if (modulesContainer) {
                graphs.modules = cytoscape({
                    container: modulesContainer,
                    elements: [
                        // Frontend Modules
                        { data: { id: 'dashboard', label: 'Dashboard\nOverview', type: 'module' } },
                        { data: { id: 'players', label: 'Players\nManagement', type: 'module' } },
                        { data: { id: 'segments', label: 'Segment\nBuilder', type: 'module' } },
                        { data: { id: 'campaigns', label: 'Campaign\nManager', type: 'module' } },
                        { data: { id: 'scenarios', label: 'Scenario\nDesigner', type: 'module' } },
                        { data: { id: 'analytics', label: 'Analytics\n& Reports', type: 'module' } },
                        { data: { id: 'settings', label: 'Settings\n& Config', type: 'module' } },
                        
                        // Core Services
                        { data: { id: 'api', label: 'API Gateway', type: 'service' } },
                        { data: { id: 'langgraph', label: 'LangGraph\nCore', type: 'ai-core' } },
                        { data: { id: 'realtime', label: 'Convex\nReal-time', type: 'service' } },
                        { data: { id: 'auth', label: 'Auth\nService', type: 'service' } },
                        
                        // Data Layer
                        { data: { id: 'supabase', label: 'Supabase\nPostgreSQL', type: 'database' } },
                        { data: { id: 'convex-db', label: 'Convex DB\nSync', type: 'database' } },
                        { data: { id: 'redis', label: 'Redis\nCache', type: 'database' } },
                        
                        // External Integrations
                        { data: { id: 'casino-apis', label: 'Casino\nAPIs', type: 'external' } },
                        { data: { id: 'payment', label: 'Payment\nProviders', type: 'external' } },
                        { data: { id: 'comm-apis', label: 'Communication\nAPIs', type: 'external' } },
                        
                        // Frontend to API connections
                        { data: { source: 'dashboard', target: 'api', label: 'REST/GraphQL' } },
                        { data: { source: 'players', target: 'api', label: 'REST/GraphQL' } },
                        { data: { source: 'segments', target: 'api', label: 'REST/GraphQL' } },
                        { data: { source: 'campaigns', target: 'api', label: 'REST/GraphQL' } },
                        { data: { source: 'scenarios', target: 'api', label: 'REST/GraphQL' } },
                        { data: { source: 'analytics', target: 'api', label: 'REST/GraphQL' } },
                        { data: { source: 'settings', target: 'api', label: 'REST/GraphQL' } },
                        
                        // Real-time connections
                        { data: { source: 'dashboard', target: 'realtime', label: 'WebSocket' } },
                        { data: { source: 'campaigns', target: 'realtime', label: 'WebSocket' } },
                        { data: { source: 'analytics', target: 'realtime', label: 'WebSocket' } },
                        
                        // API to services
                        { data: { source: 'api', target: 'auth', label: 'Verify' } },
                        { data: { source: 'api', target: 'langgraph', label: 'AI Tasks' } },
                        { data: { source: 'api', target: 'supabase', label: 'CRUD' } },
                        { data: { source: 'api', target: 'redis', label: 'Cache' } },
                        
                        // Service interconnections
                        { data: { source: 'langgraph', target: 'supabase', label: 'Query' } },
                        { data: { source: 'realtime', target: 'convex-db', label: 'Sync' } },
                        { data: { source: 'convex-db', target: 'supabase', label: 'Replicate' } },
                        
                        // External integrations
                        { data: { source: 'api', target: 'casino-apis', label: 'Fetch' } },
                        { data: { source: 'api', target: 'payment', label: 'Process' } },
                        { data: { source: 'langgraph', target: 'comm-apis', label: 'Send' } }
                    ],
                    style: [
                        {
                            selector: 'node[type="module"]',
                            style: {
                                'background-color': '#667eea',
                                'label': 'data(label)',
                                'color': '#fff',
                                'text-valign': 'center',
                                'text-halign': 'center',
                                'width': 'label',
                                'height': 'label',
                                'padding': 25,
                                'font-size': 14,
                                'border-width': 2,
                                'border-color': '#764ba2',
                                'shape': 'round-rectangle',
                                'text-wrap': 'wrap',
                                'text-max-width': 120
                            }
                        },
                        {
                            selector: 'node[type="ai-core"]',
                            style: {
                                'background-color': '#764ba2',
                                'label': 'data(label)',
                                'color': '#fff',
                                'text-valign': 'center',
                                'text-halign': 'center',
                                'width': 'label',
                                'height': 'label',
                                'padding': 30,
                                'font-size': 16,
                                'font-weight': 'bold',
                                'border-width': 3,
                                'border-color': '#f093fb',
                                'shape': 'hexagon',
                                'text-wrap': 'wrap',
                                'text-max-width': 140
                            }
                        },
                        // Core services
                        {
                            selector: 'node[type="service"]',
                            style: {
                                'shape': 'diamond',
                                'background-color': '#9b59b6',
                                'width': 100,
                                'height': 100,
                                'border-width': 2,
                                'border-color': '#8e44ad',
                                'label': 'data(label)',
                                'color': '#fff',
                                'text-valign': 'center',
                                'text-halign': 'center'
                            }
                        },
                        // Databases
                        {
                            selector: 'node[type="database"]',
                            style: {
                                'shape': 'barrel',
                                'background-color': '#16a085',
                                'width': 100,
                                'height': 80,
                                'border-width': 2,
                                'border-color': '#1abc9c',
                                'label': 'data(label)',
                                'color': '#fff',
                                'text-valign': 'center',
                                'text-halign': 'center'
                            }
                        },
                        // External services
                        {
                            selector: 'node[type="external"]',
                            style: {
                                'shape': 'round-rectangle',
                                'background-color': '#95a5a6',
                                'width': 110,
                                'height': 70,
                                'border-width': 2,
                                'border-color': '#7f8c8d',
                                'border-style': 'dashed',
                                'label': 'data(label)',
                                'color': '#fff',
                                'text-valign': 'center',
                                'text-halign': 'center'
                            }
                        },
                        // Edges
                        {
                            selector: 'edge',
                            style: {
                                'width': 2,
                                'line-color': '#7f8c8d',
                                'target-arrow-color': '#7f8c8d',
                                'target-arrow-shape': 'triangle',
                                'curve-style': 'bezier',
                                'label': 'data(label)',
                                'font-size': '9px',
                                'text-background-color': '#1a1a1a',
                                'text-background-opacity': 0.8,
                                'text-background-padding': '2px',
                                'color': '#ecf0f1'
                            }
                        }
                    ],
                    layout: {
                        name: 'cose',
                        animate: true,
                        animationDuration: 1000,
                        nodeRepulsion: 8000,
                        idealEdgeLength: 150,
                        edgeElasticity: 100,
                        nestingFactor: 5,
                        gravity: 50,
                        numIter: 1000,
                        componentSpacing: 200
                    }
                });
            }

            // Architecture Graph - BPMN стиль
            const architectureContainer = document.getElementById('architectureGraph');
            if (architectureContainer) {
                // Устанавливаем минимальную высоту
                architectureContainer.style.minHeight = '600px';
                
                graphs.architecture = cytoscape({
                    container: architectureContainer,
                    elements: [
                        // Frontend Layer
                        { data: { id: 'users', label: '👥 Users', type: 'actor' } },
                        { data: { id: 'react', label: 'React\nFrontend', type: 'frontend' } },
                        
                        // Backend Core
                        { data: { id: 'api', label: 'API\nGateway', type: 'gateway' } },
                        { data: { id: 'langgraph', label: 'LangGraph\nOrchestrator', type: 'ai-core' } },
                        
                        // Databases
                        { data: { id: 'supabase', label: 'Supabase\nPostgreSQL', type: 'database' } },
                        { data: { id: 'convex', label: 'Convex\nReal-time DB', type: 'database' } },
                        
                        // AI Agents
                        { data: { id: 'segment-agent', label: 'Segment\nAgent', type: 'agent' } },
                        { data: { id: 'scenario-agent', label: 'Scenario\nAgent', type: 'agent' } },
                        { data: { id: 'content-agent', label: 'Content\nAgent', type: 'agent' } },
                        { data: { id: 'analytics-agent', label: 'Analytics\nAgent', type: 'agent' } },
                        
                        // Communication Layer
                        { data: { id: 'comm-apis', label: 'Communication\nAPIs', type: 'service' } },
                        
                        // External Services
                        { data: { id: 'twilio', label: 'Twilio\n(Calls/SMS)', type: 'external' } },
                        { data: { id: 'sendgrid', label: 'SendGrid\n(Email)', type: 'external' } },
                        { data: { id: 'customerio', label: 'Customer.io\n(Push)', type: 'external' } },
                        
                        // External Data Sources
                        { data: { id: 'casino-api', label: 'Casino\nAPIs', type: 'external' } },
                        { data: { id: 'payment-api', label: 'Payment\nProviders', type: 'external' } },
                        
                        // Connections
                        // User flow
                        { data: { source: 'users', target: 'react', label: 'HTTP/WSS' } },
                        { data: { source: 'react', target: 'api', label: 'GraphQL' } },
                        
                        // Backend flow
                        { data: { source: 'api', target: 'langgraph', label: 'Commands' } },
                        { data: { source: 'api', target: 'convex', label: 'Real-time' } },
                        { data: { source: 'api', target: 'supabase', label: 'CRUD' } },
                        
                        // LangGraph to Agents
                        { data: { source: 'langgraph', target: 'segment-agent', label: 'Task' } },
                        { data: { source: 'langgraph', target: 'scenario-agent', label: 'Task' } },
                        { data: { source: 'langgraph', target: 'content-agent', label: 'Task' } },
                        { data: { source: 'langgraph', target: 'analytics-agent', label: 'Task' } },
                        
                        // Agents to DBs
                        { data: { source: 'segment-agent', target: 'supabase', label: 'Query' } },
                        { data: { source: 'scenario-agent', target: 'supabase', label: 'Query' } },
                        { data: { source: 'analytics-agent', target: 'supabase', label: 'Query' } },
                        { data: { source: 'content-agent', target: 'convex', label: 'Stream' } },
                        
                        // Communication flow
                        { data: { source: 'langgraph', target: 'comm-apis', label: 'Execute' } },
                        { data: { source: 'comm-apis', target: 'twilio', label: 'Call/SMS' } },
                        { data: { source: 'comm-apis', target: 'sendgrid', label: 'Email' } },
                        { data: { source: 'comm-apis', target: 'customerio', label: 'Push' } },
                        
                        // External data
                        { data: { source: 'casino-api', target: 'api', label: 'Webhooks' } },
                        { data: { source: 'payment-api', target: 'api', label: 'Callbacks' } },
                        
                        // Real-time updates
                        { data: { source: 'convex', target: 'react', label: 'WebSocket' } }
                    ],
                    style: [
                        // Базовый стиль для всех узлов
                        {
                            selector: 'node',
                            style: {
                                'label': 'data(label)',
                                'text-valign': 'center',
                                'text-halign': 'center',
                                'text-wrap': 'wrap',
                                'text-max-width': '80px',
                                'font-size': '12px',
                                'border-width': 2,
                                'color': '#fff'
                            }
                        },
                        // Actors (Users)
                        {
                            selector: 'node[type="actor"]',
                            style: {
                                'shape': 'ellipse',
                                'background-color': '#2c3e50',
                                'width': 80,
                                'height': 80,
                                'border-color': '#34495e'
                            }
                        },
                        // Frontend
                        {
                            selector: 'node[type="frontend"]',
                            style: {
                                'shape': 'round-rectangle',
                                'background-color': '#3498db',
                                'width': 120,
                                'height': 60,
                                'border-color': '#2980b9'
                            }
                        },
                        // Gateway
                        {
                            selector: 'node[type="gateway"]',
                            style: {
                                'shape': 'diamond',
                                'background-color': '#9b59b6',
                                'width': 100,
                                'height': 100,
                                'border-color': '#8e44ad'
                            }
                        },
                        // AI Core (LangGraph)
                        {
                            selector: 'node[type="ai-core"]',
                            style: {
                                'shape': 'hexagon',
                                'background-color': '#e74c3c',
                                'width': 140,
                                'height': 100,
                                'border-color': '#c0392b',
                                'font-weight': 'bold',
                                'font-size': '14px'
                            }
                        },
                        // Databases
                        {
                            selector: 'node[type="database"]',
                            style: {
                                'shape': 'barrel',
                                'background-color': '#16a085',
                                'width': 100,
                                'height': 80,
                                'border-color': '#1abc9c'
                            }
                        },
                        // AI Agents
                        {
                            selector: 'node[type="agent"]',
                            style: {
                                'shape': 'round-octagon',
                                'background-color': '#f39c12',
                                'width': 90,
                                'height': 90,
                                'border-color': '#e67e22'
                            }
                        },
                        // Service Layer
                        {
                            selector: 'node[type="service"]',
                            style: {
                                'shape': 'round-rectangle',
                                'background-color': '#27ae60',
                                'width': 120,
                                'height': 70,
                                'border-color': '#229954',
                                'border-width': 3
                            }
                        },
                        // External Services
                        {
                            selector: 'node[type="external"]',
                            style: {
                                'shape': 'round-rectangle',
                                'background-color': '#95a5a6',
                                'width': 100,
                                'height': 60,
                                'border-color': '#7f8c8d',
                                'border-style': 'dashed'
                            }
                        },
                        // Edges
                        {
                            selector: 'edge',
                            style: {
                                'width': 2,
                                'line-color': '#7f8c8d',
                                'target-arrow-color': '#7f8c8d',
                                'target-arrow-shape': 'triangle',
                                'curve-style': 'bezier',
                                'label': 'data(label)',
                                'font-size': '10px',
                                'text-background-color': '#1a1a1a',
                                'text-background-opacity': 0.8,
                                'text-background-padding': '3px',
                                'color': '#ecf0f1'
                            }
                        }
                    ],
                    layout: {
                        name: 'preset',
                        positions: {
                            // Frontend layer
                            'users': { x: 100, y: 100 },
                            'react': { x: 300, y: 100 },
                            
                            // API Gateway
                            'api': { x: 500, y: 100 },
                            
                            // Core services
                            'langgraph': { x: 700, y: 100 },
                            'convex': { x: 500, y: 250 },
                            'supabase': { x: 700, y: 250 },
                            
                            // AI Agents
                            'segment-agent': { x: 900, y: 50 },
                            'scenario-agent': { x: 1000, y: 150 },
                            'content-agent': { x: 1000, y: 250 },
                            'analytics-agent': { x: 900, y: 350 },
                            
                            // Communication layer
                            'comm-apis': { x: 700, y: 400 },
                            
                            // External services
                            'twilio': { x: 500, y: 500 },
                            'sendgrid': { x: 700, y: 500 },
                            'customerio': { x: 900, y: 500 },
                            
                            // External data
                            'casino-api': { x: 300, y: 250 },
                            'payment-api': { x: 300, y: 350 }
                        },
                        fit: true,
                        padding: 50
                    }
                });
                
                // Автоматически подгоняем по размеру после инициализации
                setTimeout(() => {
                    if (graphs.architecture) {
                        graphs.architecture.fit();
                        graphs.architecture.center();
                    }
                }, 100);
            }

            // Database Schema Graph - Enhanced PostgreSQL style with all metrics
            const databaseContainer = document.getElementById('databaseGraph');
            if (databaseContainer) {
                graphs.database = cytoscape({
                    container: databaseContainer,
                    elements: [
                        // Core Tables with enhanced fields
                        { data: { 
                            id: 'players', 
                            label: 'players', 
                            fullLabel: 'PLAYERS\n━━━━━━━━━━━━━━━━━━━━━\nBasic Info:\n• id, casino_id, email, phone\n• first_name, last_name\n• age, birthday, gender\n• country, currency, language\n• time_zone, registration_date\n\nEngagement:\n• last_active, last_login_date\n• session_count, total_time_played\n• preferred_games[]\n• device_types[]\n\nFinancial:\n• coins_balance\n• lifetime_value, total_deposits\n• total_withdrawals\n• average_bet_size\n\nScores & Status:\n• risk_score, vip_status\n• loyalty_tier, verification_status\n• communication_preferences{}',
                            type: 'table', 
                            category: 'core' 
                        }},
                        
                        { data: { 
                            id: 'player_metrics', 
                            label: 'player_metrics',
                            fullLabel: 'PLAYER_METRICS\n━━━━━━━━━━━━━━━━━━━━━\nRFM Metrics:\n• recency_days\n• frequency_30d, frequency_90d\n• monetary_30d, monetary_90d\n• monetary_lifetime\n\nRevenue Metrics:\n• revenue_last_24h, last_7d\n• revenue_last_30d, last_90d\n• average_order_value\n• total_orders\n\nEngagement Metrics:\n• sessions_last_30d\n• avg_session_duration\n• pages_per_session\n• bounce_rate\n\nGame Metrics:\n• games_played_count\n• favorite_game_type\n• win_rate, rtp_personal',
                            type: 'table',
                            category: 'metrics'
                        }},
                        
                        { data: { 
                            id: 'player_predictions', 
                            label: 'player_predictions',
                            fullLabel: 'PLAYER_PREDICTIONS\n━━━━━━━━━━━━━━━━━━━━━\nAI Scores:\n• churn_probability\n• predicted_ltv\n• conversion_probability\n• next_deposit_prediction\n\nPropensity Scores:\n• propensity_to_buy\n• upsell_propensity\n• cross_sell_propensity\n• bonus_activation_prob\n\nBehavioral Scores:\n• engagement_score\n• loyalty_score\n• risk_score\n• fraud_probability\n\nUpdated:\n• last_calculated\n• model_version',
                            type: 'table',
                            category: 'ai'
                        }},
                        
                        { data: { 
                            id: 'player_events', 
                            label: 'player_events',
                            fullLabel: 'PLAYER_EVENTS\n━━━━━━━━━━━━━━━━━━━━━\nEvent Data:\n• id, player_id\n• event_type, event_name\n• event_data{}\n• amount, currency\n\nContext:\n• game_id, round_id\n• session_id\n• device_info{}\n• location_data{}\n\nTimestamps:\n• created_at\n• processed_at',
                            type: 'table',
                            category: 'events'
                        }},
                        
                        { data: { 
                            id: 'segments', 
                            label: 'segments',
                            fullLabel: 'SEGMENTS\n━━━━━━━━━━━━━━━━━━━━━\nDefinition:\n• id, name, description\n• type (static/dynamic)\n• filters{}, conditions[]\n• priority, is_active\n\nMetrics:\n• player_count\n• avg_ltv\n• conversion_rate\n\nMeta:\n• created_by\n• created_at\n• last_updated',
                            type: 'table',
                            category: 'core'
                        }},
                        
                        { data: { 
                            id: 'player_segments', 
                            label: 'player_segments',
                            fullLabel: 'PLAYER_SEGMENTS\n━━━━━━━━━━━━━━━━━━━━━\nMapping:\n• player_id\n• segment_id\n• match_score\n• match_reason\n\nLifecycle:\n• added_at\n• removed_at\n• last_checked',
                            type: 'junction',
                            category: 'mapping'
                        }},
                        
                        { data: { 
                            id: 'campaigns', 
                            label: 'campaigns',
                            fullLabel: 'CAMPAIGNS\n━━━━━━━━━━━━━━━━━━━━━\nBasics:\n• id, name, description\n• type, status\n• target_segments[]\n\nSchedule:\n• start_date, end_date\n• timezone\n• recurrence_rule\n\nBudget & Goals:\n• budget_total\n• budget_spent\n• roi_target\n• conversion_goal\n\nResults:\n• players_reached\n• conversions\n• revenue_generated',
                            type: 'table',
                            category: 'marketing'
                        }},
                        
                        { data: { 
                            id: 'scenarios', 
                            label: 'scenarios',
                            fullLabel: 'SCENARIOS\n━━━━━━━━━━━━━━━━━━━━━\nDefinition:\n• id, campaign_id\n• name, description\n• trigger_type\n• trigger_conditions{}\n\nFlow:\n• flow_graph{}\n• steps[]\n• branches[]\n\nRules:\n• bonus_rules{}\n• timing_rules{}\n• channel_rules{}\n\nMeta:\n• version\n• is_active\n• ab_test_variant',
                            type: 'table',
                            category: 'marketing'
                        }},
                        
                        { data: { 
                            id: 'bonuses', 
                            label: 'bonuses',
                            fullLabel: 'BONUSES\n━━━━━━━━━━━━━━━━━━━━━\nBasics:\n• id, player_id\n• scenario_id\n• type, code\n\nValue:\n• amount\n• currency\n• wager_requirement\n• max_win_amount\n\nStatus:\n• status\n• issued_at\n• activated_at\n• expires_at\n• completed_at\n\nUsage:\n• wagered_amount\n• remaining_wager\n• games_allowed[]',
                            type: 'table',
                            category: 'marketing'
                        }},
                        
                        { data: { 
                            id: 'communications', 
                            label: 'communications',
                            fullLabel: 'COMMUNICATIONS\n━━━━━━━━━━━━━━━━━━━━━\nBasics:\n• id, player_id\n• scenario_id\n• channel\n• template_id\n\nContent:\n• subject\n• content{}\n• personalization{}\n• attachments[]\n\nDelivery:\n• status\n• sent_at\n• delivered_at\n• opened_at\n• clicked_at\n\nResponse:\n• click_count\n• conversion_value',
                            type: 'table',
                            category: 'marketing'
                        }},
                        
                        { data: { 
                            id: 'player_timeline', 
                            label: 'player_timeline',
                            fullLabel: 'PLAYER_TIMELINE\n━━━━━━━━━━━━━━━━━━━━━\nActivity Log:\n• player_id\n• timestamp\n• activity_type\n• activity_details{}\n• channel\n• session_id\n\nTypes:\n• game_play\n• deposit/withdrawal\n• bonus_activation\n• support_contact\n• preference_change',
                            type: 'table',
                            category: 'events'
                        }},
                        
                        { data: { 
                            id: 'analytics_cache', 
                            label: 'analytics_cache',
                            fullLabel: 'ANALYTICS_CACHE\n━━━━━━━━━━━━━━━━━━━━━\nMetrics:\n• metric_type\n• segment_id\n• time_period\n• value\n• details{}\n\nMeta:\n• calculated_at\n• expires_at\n• calculation_time_ms',
                            type: 'table',
                            category: 'analytics'
                        }},
                        
                        // Relations
                        { data: { source: 'player_metrics', target: 'players', label: 'CALCULATES' } },
                        { data: { source: 'player_predictions', target: 'players', label: 'PREDICTS' } },
                        { data: { source: 'player_events', target: 'players', label: 'BELONGS TO' } },
                        { data: { source: 'player_segments', target: 'players', label: 'MAPS' } },
                        { data: { source: 'player_segments', target: 'segments', label: 'MAPS' } },
                        { data: { source: 'scenarios', target: 'campaigns', label: 'PART OF' } },
                        { data: { source: 'bonuses', target: 'players', label: 'ISSUED TO' } },
                        { data: { source: 'bonuses', target: 'scenarios', label: 'TRIGGERED BY' } },
                        { data: { source: 'communications', target: 'players', label: 'SENT TO' } },
                        { data: { source: 'communications', target: 'scenarios', label: 'PART OF' } },
                        { data: { source: 'player_timeline', target: 'players', label: 'TRACKS' } },
                        { data: { source: 'analytics_cache', target: 'segments', label: 'ANALYZES' } }
                    ],
                    style: [
                        // Base node style
                        {
                            selector: 'node',
                            style: {
                                'label': 'data(label)',
                                'text-valign': 'center',
                                'text-halign': 'center',
                                'text-wrap': 'wrap',
                                'text-max-width': 120,
                                'font-size': 13,
                                'font-family': 'monospace',
                                'font-weight': 'bold',
                                'line-height': 1.4,
                                'color': '#fff',
                                'width': 140,
                                'height': 70,
                                'padding': 10
                            }
                        },
                        // Core tables - larger size
                        {
                            selector: 'node[category="core"]',
                            style: {
                                'shape': 'round-rectangle',
                                'background-color': '#2c3e50',
                                'border-width': 3,
                                'border-color': '#34495e',
                                'width': 180,
                                'height': 90,
                                'font-size': 14
                            }
                        },
                        // Metrics tables
                        {
                            selector: 'node[category="metrics"]',
                            style: {
                                'shape': 'hexagon',
                                'background-color': '#e74c3c',
                                'border-width': 2,
                                'border-color': '#c0392b'
                            }
                        },
                        // AI tables
                        {
                            selector: 'node[category="ai"]',
                            style: {
                                'shape': 'star',
                                'background-color': '#9b59b6',
                                'border-width': 3,
                                'border-color': '#8e44ad',
                                'width': 160,
                                'height': 160
                            }
                        },
                        // Marketing tables
                        {
                            selector: 'node[category="marketing"]',
                            style: {
                                'shape': 'round-octagon',
                                'background-color': '#3498db',
                                'border-width': 2,
                                'border-color': '#2980b9'
                            }
                        },
                        // Events tables
                        {
                            selector: 'node[category="events"]',
                            style: {
                                'shape': 'vee',
                                'background-color': '#f39c12',
                                'border-width': 2,
                                'border-color': '#d68910'
                            }
                        },
                        // Analytics tables
                        {
                            selector: 'node[category="analytics"]',
                            style: {
                                'shape': 'diamond',
                                'background-color': '#27ae60',
                                'border-width': 2,
                                'border-color': '#229954',
                                'width': 150,
                                'height': 150
                            }
                        },
                        // Junction/mapping tables
                        {
                            selector: 'node[category="mapping"]',
                            style: {
                                'shape': 'cut-rectangle',
                                'background-color': '#95a5a6',
                                'border-width': 2,
                                'border-color': '#7f8c8d',
                                'border-style': 'dashed',
                                'width': 120,
                                'height': 60
                            }
                        },
                        // Foreign key relationships
                        {
                            selector: 'edge',
                            style: {
                                'width': 2,
                                'line-color': '#7f8c8d',
                                'target-arrow-color': '#7f8c8d',
                                'target-arrow-shape': 'triangle',
                                'source-arrow-shape': 'circle',
                                'source-arrow-color': '#7f8c8d',
                                'curve-style': 'bezier',
                                'label': 'data(label)',
                                'font-size': 9,
                                'text-background-color': '#1a1a1a',
                                'text-background-opacity': 0.9,
                                'text-background-padding': '2px',
                                'color': '#ecf0f1'
                            }
                        }
                    ],
                    layout: {
                        name: 'dagre',
                        rankDir: 'TB',
                        rankSep: 120,
                        nodeSep: 80,
                        edgeSep: 50,
                        padding: 50,
                        animate: true,
                        animationDuration: 500,
                        fit: true
                    }
                });
                
                // Add interactivity - show full table details on click
                graphs.database.on('tap', 'node', function(evt){
                    const node = evt.target;
                    const fullLabel = node.data('fullLabel');
                    if (fullLabel) {
                        // Create tooltip div if it doesn't exist
                        let tooltip = document.getElementById('db-tooltip');
                        if (!tooltip) {
                            tooltip = document.createElement('div');
                            tooltip.id = 'db-tooltip';
                            tooltip.style.cssText = `
                                position: absolute;
                                background: rgba(0, 0, 0, 0.95);
                                border: 2px solid #667eea;
                                border-radius: 8px;
                                padding: 1.5rem;
                                color: #fff;
                                font-family: monospace;
                                font-size: 12px;
                                max-width: 400px;
                                z-index: 10000;
                                white-space: pre-line;
                                box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
                            `;
                            document.body.appendChild(tooltip);
                        }
                        
                        // Position tooltip near the clicked node
                        const pos = evt.renderedPosition || evt.position;
                        tooltip.innerHTML = fullLabel.replace(/•/g, '<span style="color: #667eea;">•</span>');
                        tooltip.style.display = 'block';
                        tooltip.style.left = (pos.x + 20) + 'px';
                        tooltip.style.top = (pos.y - 20) + 'px';
                        
                        // Hide tooltip when clicking elsewhere
                        const hideTooltip = () => {
                            tooltip.style.display = 'none';
                            document.removeEventListener('click', hideTooltip);
                        };
                        setTimeout(() => {
                            document.addEventListener('click', hideTooltip);
                        }, 100);
                    }
                });
                
                // Автоматически подгоняем по размеру
                setTimeout(() => {
                    if (graphs.database) {
                        graphs.database.fit();
                        graphs.database.center();
                    }
                }, 100);
            }
            
            // Data Flow Graph - Integration and ETL processes
            const dataFlowContainer = document.getElementById('dataFlowGraph');
            if (dataFlowContainer) {
                graphs.dataFlow = cytoscape({
                    container: dataFlowContainer,
                    elements: [
                        // External Sources
                        { data: { id: 'casino_api', label: 'Casino\nPlatform API', type: 'source', category: 'external' } },
                        { data: { id: 'payment_api', label: 'Payment\nProviders', type: 'source', category: 'external' } },
                        { data: { id: 'analytics_api', label: 'Analytics\nPlatforms', type: 'source', category: 'external' } },
                        { data: { id: 'game_providers', label: 'Game\nProviders', type: 'source', category: 'external' } },
                        { data: { id: 'kyc_providers', label: 'KYC/AML\nProviders', type: 'source', category: 'external' } },
                        
                        // ETL Processors
                        { data: { id: 'webhook_receiver', label: 'Webhook\nReceiver', type: 'processor', category: 'etl' } },
                        { data: { id: 'event_processor', label: 'Event\nProcessor', type: 'processor', category: 'etl' } },
                        { data: { id: 'data_transformer', label: 'Data\nTransformer', type: 'processor', category: 'etl' } },
                        { data: { id: 'validator', label: 'Data\nValidator', type: 'processor', category: 'etl' } },
                        { data: { id: 'enricher', label: 'Data\nEnricher', type: 'processor', category: 'etl' } },
                        
                        // Real-time Streams
                        { data: { id: 'convex_realtime', label: 'Convex\nReal-time', type: 'stream', category: 'realtime' } },
                        { data: { id: 'event_stream', label: 'Event\nStream', type: 'stream', category: 'realtime' } },
                        
                        // Data Storage
                        { data: { id: 'supabase_db', label: 'Supabase\nPostgreSQL', type: 'storage', category: 'database' } },
                        { data: { id: 'redis_cache', label: 'Redis\nCache', type: 'storage', category: 'cache' } },
                        { data: { id: 'vector_store', label: 'Vector\nStore', type: 'storage', category: 'ai' } },
                        
                        // AI Processing
                        { data: { id: 'ml_pipeline', label: 'ML\nPipeline', type: 'ai', category: 'processing' } },
                        { data: { id: 'prediction_engine', label: 'Prediction\nEngine', type: 'ai', category: 'processing' } },
                        { data: { id: 'segmentation_engine', label: 'Segmentation\nEngine', type: 'ai', category: 'processing' } },
                        
                        // Application Layer
                        { data: { id: 'api_gateway', label: 'API\nGateway', type: 'app', category: 'application' } },
                        { data: { id: 'business_logic', label: 'Business\nLogic', type: 'app', category: 'application' } },
                        { data: { id: 'ui_dashboard', label: 'Dashboard\nUI', type: 'app', category: 'application' } },
                        
                        // Data Flows
                        // From sources to processors
                        { data: { source: 'casino_api', target: 'webhook_receiver', label: 'Events' } },
                        { data: { source: 'payment_api', target: 'webhook_receiver', label: 'Transactions' } },
                        { data: { source: 'analytics_api', target: 'event_processor', label: 'Metrics' } },
                        { data: { source: 'game_providers', target: 'event_processor', label: 'Game Data' } },
                        { data: { source: 'kyc_providers', target: 'validator', label: 'KYC Data' } },
                        
                        // Processing flow
                        { data: { source: 'webhook_receiver', target: 'event_processor' } },
                        { data: { source: 'event_processor', target: 'data_transformer' } },
                        { data: { source: 'data_transformer', target: 'validator' } },
                        { data: { source: 'validator', target: 'enricher' } },
                        
                        // To real-time
                        { data: { source: 'enricher', target: 'convex_realtime' } },
                        { data: { source: 'enricher', target: 'event_stream' } },
                        
                        // To storage
                        { data: { source: 'convex_realtime', target: 'supabase_db' } },
                        { data: { source: 'event_stream', target: 'redis_cache' } },
                        { data: { source: 'enricher', target: 'supabase_db', label: 'Batch' } },
                        
                        // AI processing
                        { data: { source: 'supabase_db', target: 'ml_pipeline' } },
                        { data: { source: 'ml_pipeline', target: 'prediction_engine' } },
                        { data: { source: 'ml_pipeline', target: 'segmentation_engine' } },
                        { data: { source: 'prediction_engine', target: 'vector_store' } },
                        { data: { source: 'segmentation_engine', target: 'supabase_db', label: 'Results' } },
                        
                        // Application access
                        { data: { source: 'supabase_db', target: 'api_gateway' } },
                        { data: { source: 'redis_cache', target: 'api_gateway' } },
                        { data: { source: 'vector_store', target: 'api_gateway' } },
                        { data: { source: 'api_gateway', target: 'business_logic' } },
                        { data: { source: 'business_logic', target: 'ui_dashboard' } },
                        { data: { source: 'convex_realtime', target: 'ui_dashboard', label: 'WebSocket' } }
                    ],
                    style: [
                        // Base style
                        {
                            selector: 'node',
                            style: {
                                'label': 'data(label)',
                                'text-valign': 'center',
                                'text-halign': 'center',
                                'text-wrap': 'wrap',
                                'text-max-width': '80px',
                                'font-size': '11px',
                                'color': '#fff',
                                'width': 100,
                                'height': 80
                            }
                        },
                        // External sources
                        {
                            selector: 'node[category="external"]',
                            style: {
                                'shape': 'round-rectangle',
                                'background-color': '#e74c3c',
                                'border-width': 3,
                                'border-color': '#c0392b',
                                'border-style': 'dashed'
                            }
                        },
                        // ETL processors
                        {
                            selector: 'node[category="etl"]',
                            style: {
                                'shape': 'hexagon',
                                'background-color': '#f39c12',
                                'border-width': 2,
                                'border-color': '#d68910'
                            }
                        },
                        // Real-time streams
                        {
                            selector: 'node[category="realtime"]',
                            style: {
                                'shape': 'round-octagon',
                                'background-color': '#9b59b6',
                                'border-width': 3,
                                'border-color': '#8e44ad',
                                'width': 120,
                                'height': 100
                            }
                        },
                        // Databases
                        {
                            selector: 'node[category="database"]',
                            style: {
                                'shape': 'barrel',
                                'background-color': '#16a085',
                                'border-width': 3,
                                'border-color': '#1abc9c',
                                'width': 120,
                                'height': 100
                            }
                        },
                        // Cache
                        {
                            selector: 'node[category="cache"]',
                            style: {
                                'shape': 'round-diamond',
                                'background-color': '#27ae60',
                                'border-width': 2,
                                'border-color': '#229954'
                            }
                        },
                        // AI nodes
                        {
                            selector: 'node[category="ai"]',
                            style: {
                                'shape': 'star',
                                'background-color': '#8e44ad',
                                'border-width': 2,
                                'border-color': '#9b59b6'
                            }
                        },
                        // Processing nodes
                        {
                            selector: 'node[category="processing"]',
                            style: {
                                'shape': 'vee',
                                'background-color': '#e67e22',
                                'border-width': 2,
                                'border-color': '#d35400'
                            }
                        },
                        // Application layer
                        {
                            selector: 'node[category="application"]',
                            style: {
                                'shape': 'round-rectangle',
                                'background-color': '#3498db',
                                'border-width': 2,
                                'border-color': '#2980b9'
                            }
                        },
                        // Edges
                        {
                            selector: 'edge',
                            style: {
                                'width': 2,
                                'line-color': '#7f8c8d',
                                'target-arrow-color': '#7f8c8d',
                                'target-arrow-shape': 'triangle',
                                'curve-style': 'bezier',
                                'label': 'data(label)',
                                'font-size': 9,
                                'text-background-color': '#1a1a1a',
                                'text-background-opacity': 0.8,
                                'text-background-padding': '2px',
                                'color': '#bdc3c7'
                            }
                        }
                    ],
                    layout: {
                        name: 'dagre',
                        rankDir: 'LR',
                        rankSep: 150,
                        nodeSep: 60,
                        edgeSep: 30,
                        padding: 30,
                        animate: true,
                        animationDuration: 500,
                        fit: true
                    }
                });
                
                // Auto fit on creation
                setTimeout(() => {
                    if (graphs.dataFlow) {
                        graphs.dataFlow.fit();
                        graphs.dataFlow.center();
                    }
                }, 100);
            }

            // AI Agents Graph - LangGraph Architecture
            const aiAgentsContainer = document.getElementById('aiAgentsGraph');
            if (aiAgentsContainer) {
                aiAgentsContainer.style.minHeight = '600px';
                
                graphs.aiAgents = cytoscape({
                    container: aiAgentsContainer,
                    elements: [
                        // User Interface
                        { data: { id: 'chat', label: 'Chat Interface', type: 'interface' } },
                        { data: { id: 'dashboard', label: 'Dashboard', type: 'interface' } },
                        
                        // LangGraph Core
                        { data: { id: 'supervisor', label: 'Supervisor\nAgent', type: 'supervisor' } },
                        { data: { id: 'state', label: 'Graph State\nManager', type: 'state' } },
                        
                        // Specialized Agents
                        { data: { id: 'analyzer', label: 'Player Analyzer\nAgent', type: 'agent' } },
                        { data: { id: 'segmenter', label: 'Segmentation\nAgent', type: 'agent' } },
                        { data: { id: 'scenario', label: 'Scenario Builder\nAgent', type: 'agent' } },
                        { data: { id: 'bonus', label: 'Bonus Calculator\nAgent', type: 'agent' } },
                        { data: { id: 'content', label: 'Content Generator\nAgent', type: 'agent' } },
                        { data: { id: 'executor', label: 'Campaign Executor\nAgent', type: 'agent' } },
                        
                        // Tools & Functions
                        { data: { id: 'query_tool', label: 'SQL Query\nTool', type: 'tool' } },
                        { data: { id: 'ml_tool', label: 'ML Prediction\nTool', type: 'tool' } },
                        { data: { id: 'template_tool', label: 'Template\nEngine', type: 'tool' } },
                        { data: { id: 'api_tool', label: 'External API\nTool', type: 'tool' } },
                        
                        // Data Layer
                        { data: { id: 'supabase', label: 'Supabase', type: 'database' } },
                        { data: { id: 'vector_db', label: 'Vector DB\n(Embeddings)', type: 'database' } },
                        { data: { id: 'comm_api', label: 'Communication\nAPIs', type: 'external' } },
                        
                        // Flow connections
                        // UI to Supervisor
                        { data: { source: 'chat', target: 'supervisor', label: 'Request' } },
                        { data: { source: 'dashboard', target: 'supervisor', label: 'Command' } },
                        
                        // Supervisor orchestration
                        { data: { source: 'supervisor', target: 'state', label: 'Updates' } },
                        { data: { source: 'state', target: 'supervisor', label: 'Context' } },
                        
                        // Supervisor to Agents
                        { data: { source: 'supervisor', target: 'analyzer', label: 'Analyze' } },
                        { data: { source: 'supervisor', target: 'segmenter', label: 'Segment' } },
                        { data: { source: 'supervisor', target: 'scenario', label: 'Build' } },
                        { data: { source: 'supervisor', target: 'bonus', label: 'Calculate' } },
                        { data: { source: 'supervisor', target: 'content', label: 'Generate' } },
                        { data: { source: 'supervisor', target: 'executor', label: 'Execute' } },
                        
                        // Agent to Tools
                        { data: { source: 'analyzer', target: 'query_tool' } },
                        { data: { source: 'analyzer', target: 'ml_tool' } },
                        { data: { source: 'segmenter', target: 'query_tool' } },
                        { data: { source: 'bonus', target: 'ml_tool' } },
                        { data: { source: 'content', target: 'template_tool' } },
                        { data: { source: 'executor', target: 'api_tool' } },
                        
                        // Tools to Data
                        { data: { source: 'query_tool', target: 'supabase' } },
                        { data: { source: 'ml_tool', target: 'vector_db' } },
                        { data: { source: 'template_tool', target: 'vector_db' } },
                        { data: { source: 'api_tool', target: 'comm_api' } },
                        
                        // Agent collaboration
                        { data: { source: 'analyzer', target: 'segmenter', label: 'Data' } },
                        { data: { source: 'segmenter', target: 'scenario', label: 'Segments' } },
                        { data: { source: 'scenario', target: 'bonus', label: 'Rules' } },
                        { data: { source: 'bonus', target: 'content', label: 'Offers' } },
                        { data: { source: 'content', target: 'executor', label: 'Messages' } }
                    ],
                    style: [
                        // Base style for all nodes
                        {
                            selector: 'node',
                            style: {
                                'label': 'data(label)',
                                'text-valign': 'center',
                                'text-halign': 'center',
                                'text-wrap': 'wrap',
                                'text-max-width': '80px',
                                'font-size': '11px',
                                'color': '#fff',
                                'width': 100,
                                'height': 80
                            }
                        },
                        // Interface nodes
                        {
                            selector: 'node[type="interface"]',
                            style: {
                                'shape': 'round-rectangle',
                                'background-color': '#3498db',
                                'border-width': 2,
                                'border-color': '#2980b9'
                            }
                        },
                        // Supervisor (LangGraph core)
                        {
                            selector: 'node[type="supervisor"]',
                            style: {
                                'shape': 'hexagon',
                                'background-color': '#e74c3c',
                                'width': 120,
                                'height': 100,
                                'font-weight': 'bold',
                                'font-size': '13px',
                                'border-width': 3,
                                'border-color': '#c0392b'
                            }
                        },
                        // State Manager
                        {
                            selector: 'node[type="state"]',
                            style: {
                                'shape': 'round-diamond',
                                'background-color': '#9b59b6',
                                'width': 100,
                                'height': 100,
                                'border-width': 3,
                                'border-color': '#8e44ad'
                            }
                        },
                        // AI Agents
                        {
                            selector: 'node[type="agent"]',
                            style: {
                                'shape': 'round-octagon',
                                'background-color': '#f39c12',
                                'border-width': 2,
                                'border-color': '#e67e22'
                            }
                        },
                        // Tools
                        {
                            selector: 'node[type="tool"]',
                            style: {
                                'shape': 'cut-rectangle',
                                'background-color': '#27ae60',
                                'width': 90,
                                'height': 70,
                                'font-size': '10px',
                                'border-width': 2,
                                'border-color': '#229954'
                            }
                        },
                        // Databases
                        {
                            selector: 'node[type="database"]',
                            style: {
                                'shape': 'barrel',
                                'background-color': '#16a085',
                                'border-width': 2,
                                'border-color': '#1abc9c'
                            }
                        },
                        // External APIs
                        {
                            selector: 'node[type="external"]',
                            style: {
                                'shape': 'round-rectangle',
                                'background-color': '#95a5a6',
                                'border-width': 2,
                                'border-color': '#7f8c8d',
                                'border-style': 'dashed'
                            }
                        },
                        // Edges
                        {
                            selector: 'edge',
                            style: {
                                'width': 2,
                                'line-color': '#7f8c8d',
                                'target-arrow-color': '#7f8c8d',
                                'target-arrow-shape': 'triangle',
                                'curve-style': 'bezier',
                                'label': 'data(label)',
                                'font-size': '9px',
                                'text-background-color': '#1a1a1a',
                                'text-background-opacity': 0.8,
                                'text-background-padding': '2px',
                                'color': '#ecf0f1'
                            }
                        }
                    ],
                    layout: {
                        name: 'preset',
                        positions: {
                            // Top layer - Interface
                            'chat': { x: 300, y: 50 },
                            'dashboard': { x: 500, y: 50 },
                            
                            // Core layer - LangGraph
                            'supervisor': { x: 400, y: 200 },
                            'state': { x: 600, y: 200 },
                            
                            // Agent layer
                            'analyzer': { x: 100, y: 350 },
                            'segmenter': { x: 250, y: 350 },
                            'scenario': { x: 400, y: 350 },
                            'bonus': { x: 550, y: 350 },
                            'content': { x: 700, y: 350 },
                            'executor': { x: 850, y: 350 },
                            
                            // Tool layer
                            'query_tool': { x: 200, y: 500 },
                            'ml_tool': { x: 400, y: 500 },
                            'template_tool': { x: 600, y: 500 },
                            'api_tool': { x: 800, y: 500 },
                            
                            // Data layer
                            'supabase': { x: 200, y: 650 },
                            'vector_db': { x: 400, y: 650 },
                            'comm_api': { x: 700, y: 650 }
                        },
                        fit: true,
                        padding: 50
                    }
                });
                
                // Автоматически подгоняем по размеру
                setTimeout(() => {
                    if (graphs.aiAgents) {
                        graphs.aiAgents.fit();
                        graphs.aiAgents.center();
                    }
                }, 100);
            }

            // Use Case 1 Graph - с задержкой для полной загрузки DOM
            setTimeout(() => {
                const useCase1Container = document.getElementById('useCase1Graph');
                if (useCase1Container) {
                    // Убедимся, что контейнер имеет высоту
                    useCase1Container.style.minHeight = '350px';
                    console.log('Initializing Use Case 1 Graph, container size:', useCase1Container.offsetWidth, 'x', useCase1Container.offsetHeight);
                    
                    graphs.useCase1 = cytoscape({
                    container: useCase1Container,
                    elements: [
                        // Steps
                        { data: { id: 'start', label: 'Старт:\nАлексей открывает\nAI Co-pilot' } },
                        { data: { id: 'request', label: 'Запрос:\n"Создай сегмент VIP\nс LTV > $2000,\nне логинились 14+ дней"' } },
                        { data: { id: 'segment', label: 'AI создает\nдинамический\nсегмент\n(267 игроков)' } },
                        { data: { id: 'scenario_req', label: 'Запрос:\n"Сделай сценарий\nреактивации с\nперсональным бонусом"' } },
                        { data: { id: 'ai_analysis', label: 'AI анализирует:\n• История игр\n• Предпочтения\n• Чувствительность\nк бонусам' } },
                        { data: { id: 'bonus_calc', label: 'AI рассчитывает\nбонусы:\n• 30% - 150% депозит\n• 15-50 фриспинов\n• Кешбэк 10-25%' } },
                        { data: { id: 'scenario', label: 'AI генерирует\nсценарий с\nA/B тестом бонусов' } },
                        { data: { id: 'review', label: 'Алексей\nпроверяет ROI\nпрогноз: 280%' } },
                        { data: { id: 'activate', label: 'Активация\nсценария' } },
                        { data: { id: 'call', label: 'AI-звонок:\n"Персональное\nпредложение"' } },
                        { data: { id: 'bonus_activate', label: 'Активация\nбонуса в\nреал-тайме' } },
                        { data: { id: 'result', label: 'Результат:\n89 активаций\n(33% конверсия)' } },
                        
                        // Flow
                        { data: { source: 'start', target: 'request' } },
                        { data: { source: 'request', target: 'segment' } },
                        { data: { source: 'segment', target: 'scenario_req' } },
                        { data: { source: 'scenario_req', target: 'ai_analysis' } },
                        { data: { source: 'ai_analysis', target: 'bonus_calc' } },
                        { data: { source: 'bonus_calc', target: 'scenario' } },
                        { data: { source: 'scenario', target: 'review' } },
                        { data: { source: 'review', target: 'activate' } },
                        { data: { source: 'activate', target: 'call' } },
                        { data: { source: 'call', target: 'bonus_activate' } },
                        { data: { source: 'bonus_activate', target: 'result' } }
                    ],
                    style: [
                        {
                            selector: 'node',
                            style: {
                                'background-color': '#667eea',
                                'label': 'data(label)',
                                'color': '#fff',
                                'text-valign': 'center',
                                'text-halign': 'center',
                                'width': 'label',
                                'height': 'label',
                                'padding': 20,
                                'text-wrap': 'wrap',
                                'text-max-width': 100,
                                'font-size': 11,
                                'shape': 'round-rectangle'
                            }
                        },
                        {
                            selector: '#start',
                            style: {
                                'background-color': '#4facfe',
                                'shape': 'ellipse'
                            }
                        },
                        {
                            selector: '#ai_analysis, #bonus_calc',
                            style: {
                                'background-color': '#f093fb',
                                'border-width': 3,
                                'border-color': '#d946ef'
                            }
                        },
                        {
                            selector: '#bonus_activate',
                            style: {
                                'background-color': '#ffd700',
                                'color': '#1a1a1a',
                                'font-weight': 'bold',
                                'shape': 'star'
                            }
                        },
                        {
                            selector: '#result',
                            style: {
                                'background-color': '#42e695',
                                'shape': 'round-hexagon',
                                'font-weight': 'bold'
                            }
                        },
                        {
                            selector: 'edge',
                            style: {
                                'width': 3,
                                'line-color': '#764ba2',
                                'target-arrow-color': '#764ba2',
                                'target-arrow-shape': 'triangle',
                                'curve-style': 'bezier'
                            }
                        }
                    ],
                    layout: {
                        name: 'dagre',
                        rankDir: 'TB',
                        nodeSep: 50,
                        rankSep: 80
                    }
                    });
                    
                    // Сразу подгоняем граф по размеру
                    graphs.useCase1.resize();
                    graphs.useCase1.fit();
                }
            }, 500);

            // Use Case 2 Graph - с задержкой для полной загрузки DOM
            setTimeout(() => {
                const useCase2Container = document.getElementById('useCase2Graph');
                if (useCase2Container) {
                    // Убедимся, что контейнер имеет высоту
                    useCase2Container.style.minHeight = '350px';
                    console.log('Initializing Use Case 2 Graph, container size:', useCase2Container.offsetWidth, 'x', useCase2Container.offsetHeight);
                    
                    graphs.useCase2 = cytoscape({
                    container: useCase2Container,
                    elements: [
                        // Steps
                        { data: { id: 'alert', label: 'Уведомление:\n"Conversion Rate\nупал на 30%"' } },
                        { data: { id: 'click', label: 'Алексей\nкликает на\nуведомление' } },
                        { data: { id: 'insight', label: 'AI инсайт:\n"Бонус 100% стал\nменее эффективным.\nПопробуем фриспины"' } },
                        { data: { id: 'navigate', label: 'Переход в\nсценарий\n"Welcome Chain"' } },
                        { data: { id: 'analyze_bonus', label: 'AI анализ:\n• CTR бонусов\n• Активации\n• Отыгрыш' } },
                        { data: { id: 'new_bonus', label: 'Новая стратегия:\n200 фриспинов\nна топ-слоты' } },
                        { data: { id: 'abtest', label: 'A/B тест:\n50% депозит 100%\n50% фриспины' } },
                        { data: { id: 'launch', label: 'Запуск\nобновленного\nсценария' } },
                        { data: { id: 'monitor', label: 'Результат:\nКонверсия +45%\nROI +120%' } },
                        
                        // Flow
                        { data: { source: 'alert', target: 'click' } },
                        { data: { source: 'click', target: 'insight' } },
                        { data: { source: 'insight', target: 'navigate' } },
                        { data: { source: 'navigate', target: 'analyze_bonus' } },
                        { data: { source: 'analyze_bonus', target: 'new_bonus' } },
                        { data: { source: 'new_bonus', target: 'abtest' } },
                        { data: { source: 'abtest', target: 'launch' } },
                        { data: { source: 'launch', target: 'monitor' } }
                    ],
                    style: [
                        {
                            selector: 'node',
                            style: {
                                'background-color': '#764ba2',
                                'label': 'data(label)',
                                'color': '#fff',
                                'text-valign': 'center',
                                'text-halign': 'center',
                                'width': 'label',
                                'height': 'label',
                                'padding': 20,
                                'text-wrap': 'wrap',
                                'text-max-width': 100,
                                'font-size': 11,
                                'shape': 'round-rectangle'
                            }
                        },
                        {
                            selector: '#alert',
                            style: {
                                'background-color': '#ff6b6b',
                                'shape': 'round-triangle'
                            }
                        },
                        {
                            selector: '#analyze_bonus, #new_bonus',
                            style: {
                                'background-color': '#f093fb',
                                'border-width': 3,
                                'border-color': '#d946ef'
                            }
                        },
                        {
                            selector: '#abtest',
                            style: {
                                'background-color': '#ffd700',
                                'color': '#1a1a1a',
                                'font-weight': 'bold'
                            }
                        },
                        {
                            selector: '#monitor',
                            style: {
                                'background-color': '#42e695',
                                'shape': 'round-hexagon',
                                'font-weight': 'bold'
                            }
                        },
                        {
                            selector: 'edge',
                            style: {
                                'width': 3,
                                'line-color': '#f093fb',
                                'target-arrow-color': '#f093fb',
                                'target-arrow-shape': 'triangle',
                                'curve-style': 'bezier'
                            }
                        }
                    ],
                    layout: {
                        name: 'dagre',
                        rankDir: 'TB',
                        nodeSep: 50,
                        rankSep: 80
                    }
                    });
                    
                    // Сразу подгоняем граф по размеру
                    graphs.useCase2.resize();
                    graphs.useCase2.fit();
                }
            }, 500);
        }

        // Graph control functions
        function resetModulesGraph() {
            if (graphs.modules) {
                graphs.modules.reset();
                graphs.modules.center();
            }
        }

        function fitModulesGraph() {
            if (graphs.modules) {
                graphs.modules.fit();
            }
        }

        function resetArchitecture() {
            if (graphs.architecture) {
                graphs.architecture.reset();
                graphs.architecture.center();
            }
        }

        function fitArchitecture() {
            if (graphs.architecture) {
                graphs.architecture.fit();
            }
        }

        function resetDatabase() {
            if (graphs.database) {
                graphs.database.reset();
                graphs.database.center();
            }
        }

        function fitDatabase() {
            if (graphs.database) {
                graphs.database.fit();
            }
        }
        
        function resetDataFlow() {
            if (graphs.dataFlow) {
                graphs.dataFlow.reset();
                graphs.dataFlow.center();
            }
        }
        
        function fitDataFlow() {
            if (graphs.dataFlow) {
                graphs.dataFlow.fit();
            }
        }

        function resetAIAgents() {
            if (graphs.aiAgents) {
                graphs.aiAgents.reset();
                graphs.aiAgents.center();
            }
        }

        function fitAIAgents() {
            if (graphs.aiAgents) {
                graphs.aiAgents.fit();
            }
        }

        function resetUseCase1() {
            if (graphs.useCase1) {
                graphs.useCase1.reset();
                graphs.useCase1.center();
            }
        }

        function fitUseCase1() {
            if (graphs.useCase1) {
                graphs.useCase1.fit();
            }
        }

        function resetUseCase2() {
            if (graphs.useCase2) {
                graphs.useCase2.reset();
                graphs.useCase2.center();
            }
        }

        function fitUseCase2() {
            if (graphs.useCase2) {
                graphs.useCase2.fit();
            }
        }

        // Initialize graphs when sections become visible
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const graphId = entry.target.id.replace('Graph', '');
                    if (graphs[graphId]) {
                        setTimeout(() => {
                            graphs[graphId].resize();
                            graphs[graphId].fit();
                        }, 100);
                    }
                }
            });
        });

        // Observe all graph containers
        document.querySelectorAll('.graph-container').forEach(container => {
            observer.observe(container);
        });
    </script>
</body>
</html>
                
